<!DOCTYPE html>
<html lang="en"><head>
<script src="Presentacion_Tidymodels_files/libs/clipboard/clipboard.min.js"></script>
<script src="Presentacion_Tidymodels_files/libs/quarto-html/tabby.min.js"></script>
<script src="Presentacion_Tidymodels_files/libs/quarto-html/popper.min.js"></script>
<script src="Presentacion_Tidymodels_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="Presentacion_Tidymodels_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Presentacion_Tidymodels_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="Presentacion_Tidymodels_files/libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="Presentacion_Tidymodels_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.3.450">

  <title>Taller de Tidymodels</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="Presentacion_Tidymodels_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="Presentacion_Tidymodels_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="Presentacion_Tidymodels_files/libs/revealjs/dist/theme/quarto.css">
  <link href="Presentacion_Tidymodels_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="Presentacion_Tidymodels_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="Presentacion_Tidymodels_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="Presentacion_Tidymodels_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    margin-bottom: 0.5rem;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Taller de Tidymodels</h1>

<div class="quarto-title-authors">
</div>

</section>
<section id="hola" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">¡Hola!</h2>
<div>
<ul>
<li class="fragment"><p>Me llamo Aitor González.</p></li>
<li class="fragment"><p>Soy estadístico en la Unidad de Bioestadística de la Facultad de Medicina de la UAB.</p></li>
</ul>
</div>
</section>
<section id="hola-1" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">¡Hola!</h2>
<ul>
<li><p>Me llamo Aitor González.</p></li>
<li><p>Soy estadístico en la Unidad de Bioestadística de la Facultad de Medicina de la UAB.</p></li>
<li><p>También explico cosas de estadística en mi canal de YouTube <a href="https://www.youtube.com/@ReEstimando"><em>ReEstimando</em></a>.</p></li>
</ul>

<img data-src="Imagenes/Logo_reestimando_logo_YT.jpg" width="300" class="r-stretch quarto-figure-center"></section>
<section>
<section id="porqué-tidymodels" class="title-slide slide level1 center">
<h1>2. ¿Porqué Tidymodels?</h1>

</section>
<section id="un-poquito-de-historia" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">2.1. Un poquito de historia</h2>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="Imagenes/Max_Kuhn.jpeg" data-margin-top="200px" data-margin-bottom="0px" data-padding="0px" width="400" height="400"></p>
</figure>
</div>
<p style="text-align: center; margin-top:0; padding:0">
Max Kuhn
</p>
</section>
<section id="un-poquito-de-historia-1" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">2.1. Un poquito de historia</h2>
<div class="columns">
<div class="column" style="width:30%;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="Imagenes/Max_Kuhn.jpeg" width="300"></p>
</figure>
</div>
</div><div class="column" style="width:70%;">
<ul>
<li class="fragment">En 2008 desarrolló la librería <strong>Caret</strong>, la cual asentó las bases del modelado estadístico en R.</li>
</ul>
</div>
</div>
</section>
<section id="un-poquito-de-historia-2" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">2.1. Un poquito de historia</h2>
<div class="columns">
<div class="column" style="width:30%;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="Imagenes/Max_Kuhn.jpeg" width="300"></p>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="Imagenes/Paper_Caret.jpeg" data-margin-top="0" width="600"></p>
</figure>
</div>
</div><div class="column" style="width:70%;">
<ul>
<li><p>En 2008 desarrolló la librería <strong>Caret</strong>, la cual asentó las bases del modelado estadístico en R.</p></li>
<li><p>El paquete cuenta con más de 7.000 citas en publicaciones académicas.</p></li>
</ul>
</div>
</div>
</section>
<section id="un-poquito-de-historia-3" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">2.1. Un poquito de historia</h2>
<div class="columns">
<div class="column" style="width:30%;">
<div style="margin-top:100px">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="Imagenes/Caret_logo.png" width="300"></p>
</figure>
</div>
</div>
</div><div class="column" style="width:70%;">
<ul>
<li class="fragment"><p>Caret fue un éxito debido a que unificó la sintáxis de los principales paquetes de modelado en R.</p></li>
<li class="fragment"><p>Además, incluía varias funciones para automatziar procesos necesarios en cualquier modelo.</p></li>
<li class="fragment"><p>Por ejemplo, una función que haga una partición en los datos: un conjunto de entrenamiento y otro de prueba (training y test).</p></li>
</ul>
</div>
</div>
</section>
<section id="un-poquito-de-historia-2-1" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">2.1. Un poquito de historia (2)</h2>
<div class="columns">
<div class="column" style="width:20%;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="Imagenes/Hadley_Wickham.jpeg" width="300"></p>
</figure>
</div>
</div><div class="column" style="width:80%;">
<ul>
<li class="fragment">En 2012 aparece el entorno de Tidyverse de la mano de <strong>Hadley Wickham</strong>.</li>
</ul>
</div>
</div>
</section>
<section id="un-poquito-de-historia-2-2" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">2.1. Un poquito de historia (2)</h2>
<div class="columns">
<div class="column" style="width:20%;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="Imagenes/Hadley_Wickham.jpeg" class="fade-out" width="150"></p>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="Imagenes/Paquetes_Tidyverse.jpeg" class="fade-in" width="300"></p>
</figure>
</div>
</div><div class="column" style="width:80%;">
<ul>
<li><p>En 2012 aparece el entorno de Tidyverse de la mano de <strong>Hadley Wickham</strong>.</p></li>
<li><p>Tidyverse proporciona múltiples herramientas para poder manipular datos facilmente.</p></li>
</ul>
<div>
<ul>
<li class="fragment"><p>Se ha convertido en uno de los paquetes más populares de R y de la ciencia de datos.</p></li>
<li class="fragment"><p>Tiene una sintáxis fácil y fluida que se enfoca más en la resolver necesidades que en la programación.</p></li>
</ul>
</div>
</div>
</div>
</section>
<section id="un-poquito-de-historia-3-1" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">2.1. Un poquito de historia (3)</h2>
<div class="quarto-layout-panel">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-layout-cell" style="flex-basis: 40.0%;justify-content: center;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="Imagenes/Hadley_Wickham.jpeg" width="140"></p>
</figure>
</div>
</div>
<div class="quarto-layout-cell" style="flex-basis: 60.0%;justify-content: center;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="Imagenes/Max_Kuhn.jpeg" width="210"></p>
</figure>
</div>
</div>
</div>
</div>
<ul>
<li>En 2019 Max Kuhn se une al <em>Tidyverso</em> y comienza a crear Tidymodels junto con el equipo de Hadley Wickham.</li>
</ul>
</section>
<section id="un-poquito-de-historia-3-2" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">2.1.Un poquito de historia (3)</h2>
<div class="quarto-layout-panel">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-layout-cell" style="flex-basis: 25.0%;justify-content: center;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="Imagenes/Hadley_Wickham.jpeg" width="140"></p>
</figure>
</div>
</div>
<div class="quarto-layout-cell" style="flex-basis: 37.5%;justify-content: center;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="Imagenes/Max_Kuhn.jpeg" width="210"></p>
</figure>
</div>
</div>
<div class="quarto-layout-cell" style="flex-basis: 37.5%;justify-content: center;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="Imagenes/Julia_Silge.jpeg" width="210"></p>
</figure>
</div>
</div>
</div>
</div>
<ul>
<li><p>En 2019 Max Kuhn se une al <em>Tidyverso</em> y comienza a crear Tidymodels junto con el equipo de Hadley Wickham.</p></li>
<li><p>Actualmente <strong>Julia Silge</strong> es, junto con Max Kuhn, la principal desarrolladora de Tidymodels.</p></li>
</ul>
</section>
<section id="un-breve-ejemplo" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">2.2. Un breve ejemplo</h2>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li>Con glmnet:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a>model <span class="ot">&lt;-</span></span>
<span id="cb1-2"><a href="#cb1-2"></a> <span class="fu">glmnet</span>(</span>
<span id="cb1-3"><a href="#cb1-3"></a>   <span class="fu">as.matrix</span>(mtcars[<span class="dv">2</span><span class="sc">:</span><span class="dv">11</span>]),</span>
<span id="cb1-4"><a href="#cb1-4"></a>   mtcars<span class="sc">$</span>mpg</span>
<span id="cb1-5"><a href="#cb1-5"></a> )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<ul>
<li>Con Tidymodels:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a>model <span class="ot">&lt;-</span></span>
<span id="cb2-2"><a href="#cb2-2"></a> <span class="fu">linear_reg</span>(<span class="at">penalty =</span> <span class="dv">0</span>, <span class="at">mixture =</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb2-3"><a href="#cb2-3"></a> <span class="fu">set_engine</span>(<span class="st">"glmnet"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb2-4"><a href="#cb2-4"></a> <span class="fu">fit</span>(mpg <span class="sc">~</span> ., mtcars)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</section>
<section id="un-breve-ejemplo-2" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">2.2. Un breve ejemplo (2)</h2>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li>Con H2O:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a>h2o<span class="sc">::</span><span class="fu">h2o.init</span>()</span>
<span id="cb3-2"><a href="#cb3-2"></a></span>
<span id="cb3-3"><a href="#cb3-3"></a><span class="fu">as.h2o</span>(mtcars, <span class="st">"mtcars"</span>)</span>
<span id="cb3-4"><a href="#cb3-4"></a></span>
<span id="cb3-5"><a href="#cb3-5"></a>model <span class="ot">&lt;-</span></span>
<span id="cb3-6"><a href="#cb3-6"></a> <span class="fu">h2o.glm</span>(</span>
<span id="cb3-7"><a href="#cb3-7"></a>   <span class="at">x =</span> <span class="fu">colnames</span>(mtcars[<span class="dv">2</span><span class="sc">:</span><span class="dv">11</span>]),</span>
<span id="cb3-8"><a href="#cb3-8"></a>   <span class="at">y =</span> <span class="st">"mpg"</span>,</span>
<span id="cb3-9"><a href="#cb3-9"></a>   <span class="st">"mtcars"</span></span>
<span id="cb3-10"><a href="#cb3-10"></a> )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<ul>
<li>Con Tidymodels:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a>model <span class="ot">&lt;-</span></span>
<span id="cb4-2"><a href="#cb4-2"></a> <span class="fu">linear_reg</span>() <span class="sc">%&gt;%</span></span>
<span id="cb4-3"><a href="#cb4-3"></a> <span class="fu">set_engine</span>(<span class="st">"h2o"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb4-4"><a href="#cb4-4"></a> <span class="fu">fit</span>(mpg <span class="sc">~</span> ., mtcars)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</section>
<section id="qué-aporta-tidymodels" class="slide level2">
<h2>2.3. ¿Qué aporta Tidymodels?</h2>
<div>
<div style="font-size:32px;">
<ul>
<li class="fragment"><p><strong>No más Caret</strong>: el paquete no tendrá más actualizaciones, sólo mantenimiento</p></li>
<li class="fragment"><p><strong>Consistencia</strong>: Misma sintáxis para todos los procesos</p></li>
<li class="fragment"><p><strong>Replicabilidad</strong></p></li>
<li class="fragment"><p><strong>Comunicación</strong>: Los outputs de Tidymodels siguen la lógica de Tidyverse</p></li>
<li class="fragment"><p><strong>Exportabilidad</strong>: Junto a Plumber y Vetiver se pueden poner los modelos en producción</p></li>
<li class="fragment"><p><strong>Posibilidades</strong>: Tidymodels da soporte a 155 modelos, incluyendo modelos para datos censurados o series temporales</p></li>
</ul>
</div>
</div>
</section></section>
<section>
<section id="de-qué-se-compone-tidymodels" class="title-slide slide level1 center">
<h1>3. ¿De qué se compone Tidymodels?</h1>

</section>
<section id="de-qué-se-compone-tidymodels-1" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">3. ¿De qué se compone Tidymodels?</h2>
<ul>
<li>El flujo de trabajo de Tidymodels es el siguiente:</li>
</ul>

<img data-src="Imagenes/Flujo_tidymodels.png" class="r-stretch quarto-figure-center"></section>
<section id="de-qué-se-compone-tidymodels-2" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">3. ¿De qué se compone Tidymodels?</h2>
<ul>
<li>La idea detrás consiste en una sola sintaxis que resuma todo este flujo de trabajo.</li>
</ul>
<div>
<div style="font-size:32px; margin-left:40px;">
<ol type="1">
<li class="fragment"><p>Partición de los datos</p></li>
<li class="fragment"><p>Pre-procesamos los datos de entrenamiento</p></li>
<li class="fragment"><p>Buscamos los hiper-parámetros ideales para nuestros datos en el modelo</p></li>
<li class="fragment"><p>Ajustamos el modelo</p></li>
<li class="fragment"><p>Comprobamos con las métricas</p></li>
<li class="fragment"><p>Vemos si funciona con unos datos que el modelo no haya visto</p></li>
</ol>
</div>
</div>
</section>
<section id="de-qué-se-compone-tidymodels-3" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">3. ¿De qué se compone Tidymodels?</h2>
<div class="columns">
<div class="column" style="width:30%;">
<div style="margin-top:100px">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="Imagenes/paquetes_tidymodels.png" width="500"></p>
</figure>
</div>
</div>
</div><div class="column" style="width:70%;">
<div>
<div style="font-size:30px;">
<ul>
<li class="fragment"><strong>Rsample</strong>: Funciones para crear distintos tipos de remuestreos.</li>
<li class="fragment"><strong>Recipes</strong>: Preprocesador de datos, simplifica el proceso de preparado de datos para cualquier modelo.</li>
<li class="fragment"><strong>Parsnip</strong>: Interfaz para ajustar modelos, hasta 155 tipos a fecha de esta presentación</li>
<li class="fragment"><strong>Yarstick</strong>: Creación de métricas para la evaluación de un modelo.</li>
<li class="fragment"><strong>Workflows</strong>: Cohesión interna de tidymodels.</li>
<li class="fragment"><strong>Tune &amp; Dials</strong>: Creación y gestión de hiper-parámetros de cualquier modelo presente en Tidymodels.</li>
</ul>
</div>
</div>
</div>
</div>
</section></section>
<section>
<section id="presentando-los-datos" class="title-slide slide level1 center">
<h1>4. Presentando los datos</h1>

</section>
<section id="caso-práctico" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">4.1. Caso práctico</h2>
<div>
<div style="font-size:30px;">
<ul>
<li class="fragment"><p>Somos unos expertos en aprendizaje automático y nos piden ayuda de un hospital 🏥</p></li>
<li class="fragment"><p>Al parecer, nuestra variable, <em>Var_respuesta</em>, es una enfermedad complicada de diagnosticar.</p></li>
<li class="fragment"><p>Los médicos han hecho un estudio caso-control en el que se miran unas cuantas variables; y al cabo de un año se da un diagnostico definitivo de <em>Var_respuesta</em>.</p></li>
<li class="fragment"><p>Haremos una modelización de tipo clasificatoria binaria, es decir de 2 niveles: o tiene la enfermedad o no la tiene. 👍/👎</p></li>
<li class="fragment"><p>Además de de nuestra variable <em>Var_respuesta</em>, tenemos otras 25 variables: de cognición, bioquímicas, genéticas, etc.</p></li>
</ul>
</div>
</div>
</section>
<section id="caso-práctico-1" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">4.1. Caso práctico</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb5-1" class="hljs-ln-code"><a href="#cb5-1"></a><span class="co"># Librerías | Carga de datos </span></span>
<span id="cb5-2" class="hljs-ln-code"><a href="#cb5-2"></a></span>
<span id="cb5-3" class="hljs-ln-code"><a href="#cb5-3"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(<span class="st">'pacman'</span>)){<span class="fu">install.packages</span>(<span class="st">'pacman'</span>)}</span>
<span id="cb5-4" class="hljs-ln-code"><a href="#cb5-4"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(</span>
<span id="cb5-5" class="hljs-ln-code"><a href="#cb5-5"></a>  readxl,      <span class="co"># Lectura de los datos</span></span>
<span id="cb5-6" class="hljs-ln-code"><a href="#cb5-6"></a>  tidyverse ,  <span class="co"># Acceso al entorno de procesamiento "tidyverse"</span></span>
<span id="cb5-7" class="hljs-ln-code"><a href="#cb5-7"></a>  tidymodels,  <span class="co"># Acceso al entorno de modelado "tidymodels"</span></span>
<span id="cb5-8" class="hljs-ln-code"><a href="#cb5-8"></a>  agua,        <span class="co"># Modelaje de entorno h2o </span></span>
<span id="cb5-9" class="hljs-ln-code"><a href="#cb5-9"></a>  themis,      <span class="co"># Soporte de la librería "recipes" para añadir sobremuestreo</span></span>
<span id="cb5-10" class="hljs-ln-code"><a href="#cb5-10"></a>  skimr,       <span class="co"># Descriptiva rápida de datos  </span></span>
<span id="cb5-11" class="hljs-ln-code"><a href="#cb5-11"></a>  naniar,</span>
<span id="cb5-12" class="hljs-ln-code"><a href="#cb5-12"></a>  ranger,</span>
<span id="cb5-13" class="hljs-ln-code"><a href="#cb5-13"></a>  knitr        <span class="co"># Renderización en html para este formato</span></span>
<span id="cb5-14" class="hljs-ln-code"><a href="#cb5-14"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="caso-práctico-2" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">4.1. Caso práctico</h2>
<ul>
<li>Antes de empezar, podemos ver la estructura del dataset:</li>
</ul>
<div class="cell">
<div class="cell-output-display">
<table>
<colgroup>
<col style="width: 3%">
<col style="width: 1%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 3%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Var_respuesta</th>
<th style="text-align: right;">Edad</th>
<th style="text-align: right;">Cognicion_01</th>
<th style="text-align: right;">Cognicion_02</th>
<th style="text-align: right;">Cognicion_03</th>
<th style="text-align: right;">Cognicion_04</th>
<th style="text-align: right;">Cognicion_05</th>
<th style="text-align: right;">Bioquimica_01</th>
<th style="text-align: right;">Bioquimica_02</th>
<th style="text-align: right;">Bioquimica_03</th>
<th style="text-align: right;">Bioquimica_04</th>
<th style="text-align: right;">Bioquimica_05</th>
<th style="text-align: right;">Bioquimica_06</th>
<th style="text-align: right;">Bioquimica_07</th>
<th style="text-align: right;">Bioquimica_08</th>
<th style="text-align: right;">Bioquimica_09</th>
<th style="text-align: right;">Bioquimica_10</th>
<th style="text-align: right;">Bioquimica_11</th>
<th style="text-align: right;">Escala_01</th>
<th style="text-align: right;">Escala_02</th>
<th style="text-align: right;">Escala_03</th>
<th style="text-align: right;">Genetica_01</th>
<th style="text-align: right;">Genetica_02</th>
<th style="text-align: right;">Genetica_03</th>
<th style="text-align: right;">Genetica_04</th>
<th style="text-align: right;">Genetica_05</th>
<th style="text-align: right;">Genetica_06</th>
<th style="text-align: right;">Genetica_07</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">0</td>
<td style="text-align: right;">14</td>
<td style="text-align: right;">101.82</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">5.65</td>
<td style="text-align: right;">13.65</td>
<td style="text-align: right;">125.71</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">84.29</td>
<td style="text-align: right;">1.48</td>
<td style="text-align: right;">30.35</td>
<td style="text-align: right;">35.68</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">28.397013</td>
<td style="text-align: right;">7.363183</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0.9665678</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">1.2921746</td>
<td style="text-align: right;">0.2417377</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">0</td>
<td style="text-align: right;">17</td>
<td style="text-align: right;">80.41</td>
<td style="text-align: right;">85.53</td>
<td style="text-align: right;">55.68</td>
<td style="text-align: right;">124.52</td>
<td style="text-align: right;">159.70</td>
<td style="text-align: right;">62.37</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">5.65</td>
<td style="text-align: right;">17.83</td>
<td style="text-align: right;">154.53</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">99.42</td>
<td style="text-align: right;">1.34</td>
<td style="text-align: right;">33.99</td>
<td style="text-align: right;">33.01</td>
<td style="text-align: right;">138.73119</td>
<td style="text-align: right;">16.769985</td>
<td style="text-align: right;">17.764831</td>
<td style="text-align: right;">0.4550571</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0.0044324</td>
</tr>
<tr class="odd">
<td style="text-align: left;">0</td>
<td style="text-align: right;">14</td>
<td style="text-align: right;">91.00</td>
<td style="text-align: right;">79.76</td>
<td style="text-align: right;">94.28</td>
<td style="text-align: right;">140.68</td>
<td style="text-align: right;">100.07</td>
<td style="text-align: right;">86.33</td>
<td style="text-align: right;">26.24</td>
<td style="text-align: right;">3.18</td>
<td style="text-align: right;">13.09</td>
<td style="text-align: right;">135.88</td>
<td style="text-align: right;">81.53</td>
<td style="text-align: right;">5.75</td>
<td style="text-align: right;">109.45</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">30.44</td>
<td style="text-align: right;">34.21</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">21.382220</td>
<td style="text-align: right;">7.061147</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">0</td>
<td style="text-align: right;">21</td>
<td style="text-align: right;">86.99</td>
<td style="text-align: right;">91.33</td>
<td style="text-align: right;">93.65</td>
<td style="text-align: right;">115.00</td>
<td style="text-align: right;">123.01</td>
<td style="text-align: right;">66.84</td>
<td style="text-align: right;">10.23</td>
<td style="text-align: right;">3.48</td>
<td style="text-align: right;">11.97</td>
<td style="text-align: right;">132.15</td>
<td style="text-align: right;">90.66</td>
<td style="text-align: right;">2.58</td>
<td style="text-align: right;">68.60</td>
<td style="text-align: right;">1.04</td>
<td style="text-align: right;">30.10</td>
<td style="text-align: right;">34.00</td>
<td style="text-align: right;">48.83394</td>
<td style="text-align: right;">7.785552</td>
<td style="text-align: right;">20.442332</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">1</td>
<td style="text-align: right;">33</td>
<td style="text-align: right;">78.83</td>
<td style="text-align: right;">104.19</td>
<td style="text-align: right;">42.68</td>
<td style="text-align: right;">112.97</td>
<td style="text-align: right;">179.16</td>
<td style="text-align: right;">59.51</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">4.05</td>
<td style="text-align: right;">13.99</td>
<td style="text-align: right;">118.33</td>
<td style="text-align: right;">114.46</td>
<td style="text-align: right;">3.03</td>
<td style="text-align: right;">62.87</td>
<td style="text-align: right;">1.14</td>
<td style="text-align: right;">22.08</td>
<td style="text-align: right;">33.50</td>
<td style="text-align: right;">33.37826</td>
<td style="text-align: right;">28.165315</td>
<td style="text-align: right;">28.817018</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">1.0690024</td>
<td style="text-align: right;">0.0339304</td>
<td style="text-align: right;">0.7820054</td>
<td style="text-align: right;">0.3230982</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0.3998781</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="caso-práctico-3" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">4.1. Caso práctico</h2>
<div class="cell">
<div class="cell-output-display">
<table>
<caption>Data summary</caption>
<tbody>
<tr class="odd">
<td style="text-align: left;">Name</td>
<td style="text-align: left;">datos</td>
</tr>
<tr class="even">
<td style="text-align: left;">Number of rows</td>
<td style="text-align: left;">285</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Number of columns</td>
<td style="text-align: left;">28</td>
</tr>
<tr class="even">
<td style="text-align: left;">_______________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Column type frequency:</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">factor</td>
<td style="text-align: left;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">numeric</td>
<td style="text-align: left;">27</td>
</tr>
<tr class="even">
<td style="text-align: left;">________________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Group variables</td>
<td style="text-align: left;">None</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: factor</strong></p>
<table>
<colgroup>
<col style="width: 20%">
<col style="width: 14%">
<col style="width: 20%">
<col style="width: 11%">
<col style="width: 13%">
<col style="width: 20%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: left;">ordered</th>
<th style="text-align: right;">n_unique</th>
<th style="text-align: left;">top_counts</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Var_respuesta</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">0: 227, 1: 58</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table>
<colgroup>
<col style="width: 15%">
<col style="width: 10%">
<col style="width: 15%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 6%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 8%">
<col style="width: 6%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: right;">mean</th>
<th style="text-align: right;">sd</th>
<th style="text-align: right;">p0</th>
<th style="text-align: right;">p25</th>
<th style="text-align: right;">p50</th>
<th style="text-align: right;">p75</th>
<th style="text-align: right;">p100</th>
<th style="text-align: left;">hist</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Edad</td>
<td style="text-align: right;">9</td>
<td style="text-align: right;">0.97</td>
<td style="text-align: right;">22.33</td>
<td style="text-align: right;">6.47</td>
<td style="text-align: right;">8.00</td>
<td style="text-align: right;">17.00</td>
<td style="text-align: right;">21.00</td>
<td style="text-align: right;">27.00</td>
<td style="text-align: right;">39.00</td>
<td style="text-align: left;">▂▇▆▅▂</td>
</tr>
<tr class="even">
<td style="text-align: left;">Cognicion_01</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">86.51</td>
<td style="text-align: right;">29.37</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">78.50</td>
<td style="text-align: right;">90.56</td>
<td style="text-align: right;">103.13</td>
<td style="text-align: right;">143.84</td>
<td style="text-align: left;">▁▁▅▇▂</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Cognicion_02</td>
<td style="text-align: right;">82</td>
<td style="text-align: right;">0.71</td>
<td style="text-align: right;">90.22</td>
<td style="text-align: right;">12.98</td>
<td style="text-align: right;">55.23</td>
<td style="text-align: right;">80.74</td>
<td style="text-align: right;">90.43</td>
<td style="text-align: right;">98.98</td>
<td style="text-align: right;">129.15</td>
<td style="text-align: left;">▁▆▇▃▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">Cognicion_03</td>
<td style="text-align: right;">57</td>
<td style="text-align: right;">0.80</td>
<td style="text-align: right;">77.62</td>
<td style="text-align: right;">17.80</td>
<td style="text-align: right;">35.22</td>
<td style="text-align: right;">65.91</td>
<td style="text-align: right;">76.77</td>
<td style="text-align: right;">88.23</td>
<td style="text-align: right;">130.09</td>
<td style="text-align: left;">▂▇▇▃▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Cognicion_04</td>
<td style="text-align: right;">64</td>
<td style="text-align: right;">0.78</td>
<td style="text-align: right;">134.85</td>
<td style="text-align: right;">51.16</td>
<td style="text-align: right;">15.31</td>
<td style="text-align: right;">97.17</td>
<td style="text-align: right;">137.91</td>
<td style="text-align: right;">172.32</td>
<td style="text-align: right;">245.38</td>
<td style="text-align: left;">▂▅▇▆▂</td>
</tr>
<tr class="even">
<td style="text-align: left;">Cognicion_05</td>
<td style="text-align: right;">70</td>
<td style="text-align: right;">0.75</td>
<td style="text-align: right;">126.23</td>
<td style="text-align: right;">44.38</td>
<td style="text-align: right;">53.89</td>
<td style="text-align: right;">94.13</td>
<td style="text-align: right;">120.96</td>
<td style="text-align: right;">155.32</td>
<td style="text-align: right;">249.33</td>
<td style="text-align: left;">▆▇▆▂▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Bioquimica_01</td>
<td style="text-align: right;">54</td>
<td style="text-align: right;">0.81</td>
<td style="text-align: right;">75.94</td>
<td style="text-align: right;">14.24</td>
<td style="text-align: right;">42.80</td>
<td style="text-align: right;">66.92</td>
<td style="text-align: right;">74.56</td>
<td style="text-align: right;">84.50</td>
<td style="text-align: right;">118.52</td>
<td style="text-align: left;">▂▇▇▃▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">Bioquimica_02</td>
<td style="text-align: right;">43</td>
<td style="text-align: right;">0.85</td>
<td style="text-align: right;">36.07</td>
<td style="text-align: right;">38.35</td>
<td style="text-align: right;">0.12</td>
<td style="text-align: right;">11.43</td>
<td style="text-align: right;">24.47</td>
<td style="text-align: right;">42.21</td>
<td style="text-align: right;">250.61</td>
<td style="text-align: left;">▇▂▁▁▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Bioquimica_03</td>
<td style="text-align: right;">13</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">4.05</td>
<td style="text-align: right;">1.64</td>
<td style="text-align: right;">1.27</td>
<td style="text-align: right;">2.90</td>
<td style="text-align: right;">3.67</td>
<td style="text-align: right;">4.74</td>
<td style="text-align: right;">12.68</td>
<td style="text-align: left;">▇▇▂▁▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">Bioquimica_04</td>
<td style="text-align: right;">12</td>
<td style="text-align: right;">0.96</td>
<td style="text-align: right;">14.30</td>
<td style="text-align: right;">1.96</td>
<td style="text-align: right;">8.88</td>
<td style="text-align: right;">12.95</td>
<td style="text-align: right;">14.34</td>
<td style="text-align: right;">15.54</td>
<td style="text-align: right;">20.65</td>
<td style="text-align: left;">▁▆▇▃▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Bioquimica_05</td>
<td style="text-align: right;">18</td>
<td style="text-align: right;">0.94</td>
<td style="text-align: right;">140.83</td>
<td style="text-align: right;">15.09</td>
<td style="text-align: right;">99.88</td>
<td style="text-align: right;">129.72</td>
<td style="text-align: right;">141.38</td>
<td style="text-align: right;">152.12</td>
<td style="text-align: right;">187.37</td>
<td style="text-align: left;">▁▆▇▃▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">Bioquimica_06</td>
<td style="text-align: right;">54</td>
<td style="text-align: right;">0.81</td>
<td style="text-align: right;">86.32</td>
<td style="text-align: right;">13.75</td>
<td style="text-align: right;">55.96</td>
<td style="text-align: right;">77.21</td>
<td style="text-align: right;">86.04</td>
<td style="text-align: right;">95.10</td>
<td style="text-align: right;">142.74</td>
<td style="text-align: left;">▃▇▅▁▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Bioquimica_07</td>
<td style="text-align: right;">34</td>
<td style="text-align: right;">0.88</td>
<td style="text-align: right;">3.58</td>
<td style="text-align: right;">1.15</td>
<td style="text-align: right;">0.83</td>
<td style="text-align: right;">3.08</td>
<td style="text-align: right;">3.74</td>
<td style="text-align: right;">4.30</td>
<td style="text-align: right;">6.56</td>
<td style="text-align: left;">▂▂▇▃▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">Bioquimica_08</td>
<td style="text-align: right;">16</td>
<td style="text-align: right;">0.94</td>
<td style="text-align: right;">84.37</td>
<td style="text-align: right;">12.35</td>
<td style="text-align: right;">43.50</td>
<td style="text-align: right;">76.65</td>
<td style="text-align: right;">83.96</td>
<td style="text-align: right;">91.39</td>
<td style="text-align: right;">126.11</td>
<td style="text-align: left;">▁▃▇▃▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Bioquimica_09</td>
<td style="text-align: right;">57</td>
<td style="text-align: right;">0.80</td>
<td style="text-align: right;">1.13</td>
<td style="text-align: right;">0.29</td>
<td style="text-align: right;">0.51</td>
<td style="text-align: right;">0.91</td>
<td style="text-align: right;">1.12</td>
<td style="text-align: right;">1.33</td>
<td style="text-align: right;">2.09</td>
<td style="text-align: left;">▃▇▆▂▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">Bioquimica_10</td>
<td style="text-align: right;">12</td>
<td style="text-align: right;">0.96</td>
<td style="text-align: right;">30.09</td>
<td style="text-align: right;">3.88</td>
<td style="text-align: right;">18.24</td>
<td style="text-align: right;">27.48</td>
<td style="text-align: right;">30.34</td>
<td style="text-align: right;">32.51</td>
<td style="text-align: right;">40.62</td>
<td style="text-align: left;">▁▃▇▆▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Bioquimica_11</td>
<td style="text-align: right;">14</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">33.84</td>
<td style="text-align: right;">3.66</td>
<td style="text-align: right;">21.90</td>
<td style="text-align: right;">31.56</td>
<td style="text-align: right;">33.71</td>
<td style="text-align: right;">36.08</td>
<td style="text-align: right;">43.57</td>
<td style="text-align: left;">▁▃▇▆▂</td>
</tr>
<tr class="even">
<td style="text-align: left;">Escala_01</td>
<td style="text-align: right;">32</td>
<td style="text-align: right;">0.89</td>
<td style="text-align: right;">103.18</td>
<td style="text-align: right;">122.93</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">21.23</td>
<td style="text-align: right;">54.69</td>
<td style="text-align: right;">137.77</td>
<td style="text-align: right;">892.17</td>
<td style="text-align: left;">▇▂▁▁▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Escala_02</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">18.50</td>
<td style="text-align: right;">8.08</td>
<td style="text-align: right;">6.17</td>
<td style="text-align: right;">11.19</td>
<td style="text-align: right;">18.43</td>
<td style="text-align: right;">23.58</td>
<td style="text-align: right;">41.45</td>
<td style="text-align: left;">▇▇▇▃▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">Escala_03</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">18.65</td>
<td style="text-align: right;">8.24</td>
<td style="text-align: right;">5.79</td>
<td style="text-align: right;">12.32</td>
<td style="text-align: right;">17.76</td>
<td style="text-align: right;">24.00</td>
<td style="text-align: right;">46.96</td>
<td style="text-align: left;">▇▇▅▂▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Genetica_01</td>
<td style="text-align: right;">160</td>
<td style="text-align: right;">0.44</td>
<td style="text-align: right;">0.80</td>
<td style="text-align: right;">0.60</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0.29</td>
<td style="text-align: right;">0.64</td>
<td style="text-align: right;">1.23</td>
<td style="text-align: right;">2.99</td>
<td style="text-align: left;">▇▅▃▁▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">Genetica_02</td>
<td style="text-align: right;">170</td>
<td style="text-align: right;">0.40</td>
<td style="text-align: right;">0.78</td>
<td style="text-align: right;">0.55</td>
<td style="text-align: right;">0.01</td>
<td style="text-align: right;">0.33</td>
<td style="text-align: right;">0.73</td>
<td style="text-align: right;">1.05</td>
<td style="text-align: right;">2.27</td>
<td style="text-align: left;">▇▇▅▂▂</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Genetica_03</td>
<td style="text-align: right;">178</td>
<td style="text-align: right;">0.38</td>
<td style="text-align: right;">0.76</td>
<td style="text-align: right;">0.56</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0.32</td>
<td style="text-align: right;">0.67</td>
<td style="text-align: right;">1.09</td>
<td style="text-align: right;">2.22</td>
<td style="text-align: left;">▇▇▅▂▂</td>
</tr>
<tr class="even">
<td style="text-align: left;">Genetica_04</td>
<td style="text-align: right;">168</td>
<td style="text-align: right;">0.41</td>
<td style="text-align: right;">0.84</td>
<td style="text-align: right;">0.55</td>
<td style="text-align: right;">0.01</td>
<td style="text-align: right;">0.42</td>
<td style="text-align: right;">0.70</td>
<td style="text-align: right;">1.20</td>
<td style="text-align: right;">2.60</td>
<td style="text-align: left;">▇▇▅▂▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Genetica_05</td>
<td style="text-align: right;">145</td>
<td style="text-align: right;">0.49</td>
<td style="text-align: right;">20.19</td>
<td style="text-align: right;">214.06</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0.84</td>
<td style="text-align: right;">1.82</td>
<td style="text-align: right;">3.17</td>
<td style="text-align: right;">2534.81</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">Genetica_06</td>
<td style="text-align: right;">178</td>
<td style="text-align: right;">0.38</td>
<td style="text-align: right;">0.84</td>
<td style="text-align: right;">0.53</td>
<td style="text-align: right;">0.03</td>
<td style="text-align: right;">0.37</td>
<td style="text-align: right;">0.77</td>
<td style="text-align: right;">1.21</td>
<td style="text-align: right;">2.36</td>
<td style="text-align: left;">▇▇▆▂▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Genetica_07</td>
<td style="text-align: right;">137</td>
<td style="text-align: right;">0.52</td>
<td style="text-align: right;">0.83</td>
<td style="text-align: right;">0.59</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0.32</td>
<td style="text-align: right;">0.72</td>
<td style="text-align: right;">1.25</td>
<td style="text-align: right;">2.35</td>
<td style="text-align: left;">▇▆▅▃▂</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="caso-práctico-4" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">4.1. Caso práctico</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb6-1" class="hljs-ln-code"><a href="#cb6-1"></a>naniar<span class="sc">::</span><span class="fu">gg_miss_upset</span>(datos, <span class="at">nsets =</span> <span class="dv">10</span>, <span class="at">nintersects =</span> <span class="dv">50</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="Presentacion_Tidymodels_files/figure-revealjs/caso-practico-4-1.png" width="960" class="r-stretch"></section></section>
<section>
<section id="preparando-la-partición-de-datos-con-rsample" class="title-slide slide level1 center">
<h1>5. Preparando la partición de datos con Rsample</h1>

</section>
<section id="cuidado-con-los-datos" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">5.1. Cuidado con los datos</h2>
<div>
<ul>
<li class="fragment">Es necesario controlar qué datos utilizamos en el entrenamiento del modelo para que cuando se use en producción, el modelo sea capaz de responder.</li>
</ul>
</div>
</section>
<section id="cuidado-con-los-datos-1" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">5.1. Cuidado con los datos</h2>
<ul>
<li>Es necesario controlar qué datos utilizamos en el entrenamiento del modelo para que cuando se use en producción, el modelo sea capaz de responder.</li>
</ul>

<img data-src="Imagenes/meme_spiderman_remuestreo.jpeg" class="r-stretch quarto-figure-center"></section>
<section id="remuestreo-con-rsample" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">5.1.1. Remuestreo con <em>RSample</em></h2>
<ul>
<li>Crearemos una partición de la muestra en unos datos para “entrenar” el modelo y la otra para “evaluarlo”.</li>
</ul>
<div class="quarto-layout-panel">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-layout-cell" style="flex-basis: 60.2%;justify-content: center;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="Imagenes/esquema_training_test.jpeg" width="300"></p>
</figure>
</div>
</div>
<div class="quarto-layout-cell" style="flex-basis: 39.8%;justify-content: center;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="Imagenes/logo_rsample.png" width="198"></p>
</figure>
</div>
</div>
</div>
</div>
</section>
<section id="algunas-funciones-importantes-en-rsample" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">5.1.2. Algunas funciones importantes en <em>RSample</em></h2>
<ul>
<li><code>initial_split</code>: Principal función dentro de la librería. Crea un objeto “split” sencillo para hacer una partición de datos.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb7-1" class="hljs-ln-code"><a href="#cb7-1"></a><span class="fu">initial_split</span>(datos, <span class="at">prop =</span> <span class="fl">0.6</span> )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;Training/Testing/Total&gt;
&lt;171/114/285&gt;</code></pre>
</div>
</div>
</section>
<section id="algunas-funciones-importantes-en-rsample-1" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">5.1.2. Algunas funciones importantes en <em>RSample</em></h2>
<ul>
<li><code>bootstraps</code>: Crea un tibble con n cantidad de objetos “split” y su correspondiente identificador. En las muestras tipo bootsrap, los individuos pueden aparecer más de una vez en el conjunto de datos.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb9-1" class="hljs-ln-code"><a href="#cb9-1"></a>rsample<span class="sc">::</span><span class="fu">bootstraps</span>(datos,<span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># Bootstrap sampling 
# A tibble: 5 × 2
  splits            id        
  &lt;list&gt;            &lt;chr&gt;     
1 &lt;split [285/106]&gt; Bootstrap1
2 &lt;split [285/94]&gt;  Bootstrap2
3 &lt;split [285/101]&gt; Bootstrap3
4 &lt;split [285/103]&gt; Bootstrap4
5 &lt;split [285/102]&gt; Bootstrap5</code></pre>
</div>
</div>
</section>
<section id="algunas-funciones-importantes-en-rsample-2" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">5.1.2. Algunas funciones importantes en <em>RSample</em></h2>
<ul>
<li><code>rolling_origin</code>: Crea un tibble con n cantidad de objetos “split” y su correspondiente identificador. En este caso, los remuestreos no son aleatorios y cada partición contiene datos consecutivos.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb11-1" class="hljs-ln-code"><a href="#cb11-1"></a><span class="fu">rolling_origin</span>(datos, <span class="at">initial =</span> <span class="dv">20</span>, <span class="at">assess =</span> <span class="dv">20</span>, <span class="at">skip =</span> <span class="dv">40</span>, <span class="at">cumulative =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="algunas-funciones-importantes-en-rsample-3" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">5.1.2. Algunas funciones importantes en <em>RSample</em></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb12-1" class="hljs-ln-code"><a href="#cb12-1"></a><span class="fu">rolling_origin</span>(datos, <span class="at">initial =</span> <span class="dv">20</span>, <span class="at">assess =</span> <span class="dv">20</span>, <span class="at">skip =</span> <span class="dv">40</span>, <span class="at">cumulative =</span> <span class="cn">FALSE</span>)</span>
<span id="cb12-2" class="hljs-ln-code"><a href="#cb12-2"></a><span class="fu">rolling_origin</span>(datos, <span class="at">initial =</span> <span class="dv">50</span>, <span class="at">assess =</span> <span class="dv">20</span>, <span class="at">skip =</span> <span class="dv">70</span>, <span class="at">cumulative =</span> <span class="cn">FALSE</span>)</span>
<span id="cb12-3" class="hljs-ln-code"><a href="#cb12-3"></a><span class="fu">rolling_origin</span>(datos, <span class="at">initial =</span> <span class="dv">20</span>, <span class="at">assess =</span> <span class="dv">20</span>, <span class="at">skip =</span> <span class="dv">40</span>, <span class="at">cumulative =</span> <span class="cn">TRUE</span>)</span>
<span id="cb12-4" class="hljs-ln-code"><a href="#cb12-4"></a><span class="fu">rolling_origin</span>(datos, <span class="at">initial =</span> <span class="dv">50</span>, <span class="at">assess =</span> <span class="dv">50</span>, <span class="at">skip =</span> <span class="dv">70</span>, <span class="at">cumulative =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>

<img data-src="Presentacion_Tidymodels_files/figure-revealjs/unnamed-chunk-6-1.png" width="960" class="r-stretch"></section>
<section id="estratificación" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">5.2. Estratificación</h2>
<div>
<ul>
<li class="fragment"><p>Como las particiones son aleatorias, puede que uno de los conjuntos contenga más datos de un tipo que de otro.</p></li>
<li class="fragment"><p>Idealmente querríamos que el conjunto de entrenamiento y el de evaluación contuvieran la misma proporción de las categorías.</p></li>
</ul>
</div>
</section>
<section id="estratificación-1" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">5.2. Estratificación</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb13-1" class="hljs-ln-code"><a href="#cb13-1"></a><span class="fu">set.seed</span>(<span class="dv">4147</span>)</span>
<span id="cb13-2" class="hljs-ln-code"><a href="#cb13-2"></a><span class="co"># Splits ----</span></span>
<span id="cb13-3" class="hljs-ln-code"><a href="#cb13-3"></a></span>
<span id="cb13-4" class="hljs-ln-code"><a href="#cb13-4"></a><span class="do">## Sin estratificar </span></span>
<span id="cb13-5" class="hljs-ln-code"><a href="#cb13-5"></a>Split_datos_no_strat <span class="ot">&lt;-</span> <span class="fu">initial_split</span>(datos, <span class="at">prop =</span> <span class="fl">0.70</span> )</span>
<span id="cb13-6" class="hljs-ln-code"><a href="#cb13-6"></a><span class="co"># Put 3/4 of the data into the training set </span></span>
<span id="cb13-7" class="hljs-ln-code"><a href="#cb13-7"></a><span class="co"># 🔴 Initial_split con datos estratificados 🔴</span></span>
<span id="cb13-8" class="hljs-ln-code"><a href="#cb13-8"></a><span class="do">## Estratificados </span></span>
<span id="cb13-9" class="hljs-ln-code"><a href="#cb13-9"></a>Split_datos_strat <span class="ot">&lt;-</span> <span class="fu">initial_split</span>(datos, <span class="at">prop =</span> <span class="fl">0.70</span>, <span class="at">strata =</span> Var_respuesta)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="estratificación-2" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">5.2. Estratificación</h2>

<img data-src="Presentacion_Tidymodels_files/figure-revealjs/unnamed-chunk-8-1.png" width="960" class="r-stretch"></section>
<section id="deshacer-la-partición" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">5.3. Deshacer la partición</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb14-1" class="hljs-ln-code"><a href="#cb14-1"></a><span class="co"># 🔴 Deshacemos las particiones con las funciones training y testing 🔴</span></span>
<span id="cb14-2" class="hljs-ln-code"><a href="#cb14-2"></a></span>
<span id="cb14-3" class="hljs-ln-code"><a href="#cb14-3"></a>Training_datos <span class="ot">&lt;-</span> <span class="fu">training</span>(Split_datos_strat)</span>
<span id="cb14-4" class="hljs-ln-code"><a href="#cb14-4"></a>Testing_datos  <span class="ot">&lt;-</span> <span class="fu">testing</span>(Split_datos_strat)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<table>
<colgroup>
<col style="width: 3%">
<col style="width: 1%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 3%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Var_respuesta</th>
<th style="text-align: right;">Edad</th>
<th style="text-align: right;">Cognicion_01</th>
<th style="text-align: right;">Cognicion_02</th>
<th style="text-align: right;">Cognicion_03</th>
<th style="text-align: right;">Cognicion_04</th>
<th style="text-align: right;">Cognicion_05</th>
<th style="text-align: right;">Bioquimica_01</th>
<th style="text-align: right;">Bioquimica_02</th>
<th style="text-align: right;">Bioquimica_03</th>
<th style="text-align: right;">Bioquimica_04</th>
<th style="text-align: right;">Bioquimica_05</th>
<th style="text-align: right;">Bioquimica_06</th>
<th style="text-align: right;">Bioquimica_07</th>
<th style="text-align: right;">Bioquimica_08</th>
<th style="text-align: right;">Bioquimica_09</th>
<th style="text-align: right;">Bioquimica_10</th>
<th style="text-align: right;">Bioquimica_11</th>
<th style="text-align: right;">Escala_01</th>
<th style="text-align: right;">Escala_02</th>
<th style="text-align: right;">Escala_03</th>
<th style="text-align: right;">Genetica_01</th>
<th style="text-align: right;">Genetica_02</th>
<th style="text-align: right;">Genetica_03</th>
<th style="text-align: right;">Genetica_04</th>
<th style="text-align: right;">Genetica_05</th>
<th style="text-align: right;">Genetica_06</th>
<th style="text-align: right;">Genetica_07</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">0</td>
<td style="text-align: right;">14</td>
<td style="text-align: right;">66.78</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">54.33</td>
<td style="text-align: right;">2.56</td>
<td style="text-align: right;">16.07</td>
<td style="text-align: right;">161.64</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">99.47</td>
<td style="text-align: right;">0.92</td>
<td style="text-align: right;">30.14</td>
<td style="text-align: right;">34.27</td>
<td style="text-align: right;">133.149284</td>
<td style="text-align: right;">18.11677</td>
<td style="text-align: right;">31.680105</td>
<td style="text-align: right;">1.6247538</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0.9775707</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0.9699578</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">1.1983120</td>
</tr>
<tr class="even">
<td style="text-align: left;">0</td>
<td style="text-align: right;">23</td>
<td style="text-align: right;">108.18</td>
<td style="text-align: right;">84.49</td>
<td style="text-align: right;">82.39</td>
<td style="text-align: right;">183.52</td>
<td style="text-align: right;">166.31</td>
<td style="text-align: right;">101.24</td>
<td style="text-align: right;">3.66</td>
<td style="text-align: right;">3.18</td>
<td style="text-align: right;">20.29</td>
<td style="text-align: right;">148.58</td>
<td style="text-align: right;">100.23</td>
<td style="text-align: right;">3.53</td>
<td style="text-align: right;">81.72</td>
<td style="text-align: right;">1.11</td>
<td style="text-align: right;">35.75</td>
<td style="text-align: right;">34.03</td>
<td style="text-align: right;">68.943373</td>
<td style="text-align: right;">12.18331</td>
<td style="text-align: right;">15.670177</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">1.797438</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0.1373531</td>
<td style="text-align: right;">1.1481697</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">0</td>
<td style="text-align: right;">26</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">129.41</td>
<td style="text-align: right;">5.99</td>
<td style="text-align: right;">14.98</td>
<td style="text-align: right;">145.04</td>
<td style="text-align: right;">94.53</td>
<td style="text-align: right;">4.20</td>
<td style="text-align: right;">78.76</td>
<td style="text-align: right;">0.87</td>
<td style="text-align: right;">32.57</td>
<td style="text-align: right;">26.89</td>
<td style="text-align: right;">2.898493</td>
<td style="text-align: right;">11.23652</td>
<td style="text-align: right;">6.628174</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">1.6622978</td>
<td style="text-align: right;">2.6878823</td>
<td style="text-align: right;">1.6836672</td>
<td style="text-align: right;">0.1001570</td>
</tr>
<tr class="even">
<td style="text-align: left;">0</td>
<td style="text-align: right;">14</td>
<td style="text-align: right;">52.88</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">2.06</td>
<td style="text-align: right;">13.98</td>
<td style="text-align: right;">132.94</td>
<td style="text-align: right;">105.75</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">82.49</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">34.73</td>
<td style="text-align: right;">29.83</td>
<td style="text-align: right;">99.600374</td>
<td style="text-align: right;">25.02682</td>
<td style="text-align: right;">12.949102</td>
<td style="text-align: right;">0.1247104</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0.6977428</td>
<td style="text-align: right;">1.2486785</td>
<td style="text-align: right;">0.4195379</td>
<td style="text-align: right;">0.3760827</td>
</tr>
<tr class="odd">
<td style="text-align: left;">0</td>
<td style="text-align: right;">27</td>
<td style="text-align: right;">109.25</td>
<td style="text-align: right;">88.04</td>
<td style="text-align: right;">103.31</td>
<td style="text-align: right;">143.93</td>
<td style="text-align: right;">144.97</td>
<td style="text-align: right;">100.08</td>
<td style="text-align: right;">8.09</td>
<td style="text-align: right;">4.49</td>
<td style="text-align: right;">19.09</td>
<td style="text-align: right;">187.37</td>
<td style="text-align: right;">84.47</td>
<td style="text-align: right;">3.87</td>
<td style="text-align: right;">91.97</td>
<td style="text-align: right;">1.26</td>
<td style="text-align: right;">30.74</td>
<td style="text-align: right;">34.95</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">16.79845</td>
<td style="text-align: right;">7.607729</td>
<td style="text-align: right;">0.8493442</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0.8781136</td>
<td style="text-align: right;">1.9962258</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="deshacer-la-partición-1" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">5.3. Deshacer la partición</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb15-1" class="hljs-ln-code"><a href="#cb15-1"></a><span class="co"># 🔴 Deshacemos las particiones con las funciones training y testing 🔴</span></span>
<span id="cb15-2" class="hljs-ln-code"><a href="#cb15-2"></a></span>
<span id="cb15-3" class="hljs-ln-code"><a href="#cb15-3"></a>Training_datos <span class="ot">&lt;-</span> <span class="fu">training</span>(Split_datos_strat)</span>
<span id="cb15-4" class="hljs-ln-code"><a href="#cb15-4"></a>Testing_datos  <span class="ot">&lt;-</span> <span class="fu">testing</span>(Split_datos_strat)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<table>
<colgroup>
<col style="width: 3%">
<col style="width: 1%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 3%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Var_respuesta</th>
<th style="text-align: right;">Edad</th>
<th style="text-align: right;">Cognicion_01</th>
<th style="text-align: right;">Cognicion_02</th>
<th style="text-align: right;">Cognicion_03</th>
<th style="text-align: right;">Cognicion_04</th>
<th style="text-align: right;">Cognicion_05</th>
<th style="text-align: right;">Bioquimica_01</th>
<th style="text-align: right;">Bioquimica_02</th>
<th style="text-align: right;">Bioquimica_03</th>
<th style="text-align: right;">Bioquimica_04</th>
<th style="text-align: right;">Bioquimica_05</th>
<th style="text-align: right;">Bioquimica_06</th>
<th style="text-align: right;">Bioquimica_07</th>
<th style="text-align: right;">Bioquimica_08</th>
<th style="text-align: right;">Bioquimica_09</th>
<th style="text-align: right;">Bioquimica_10</th>
<th style="text-align: right;">Bioquimica_11</th>
<th style="text-align: right;">Escala_01</th>
<th style="text-align: right;">Escala_02</th>
<th style="text-align: right;">Escala_03</th>
<th style="text-align: right;">Genetica_01</th>
<th style="text-align: right;">Genetica_02</th>
<th style="text-align: right;">Genetica_03</th>
<th style="text-align: right;">Genetica_04</th>
<th style="text-align: right;">Genetica_05</th>
<th style="text-align: right;">Genetica_06</th>
<th style="text-align: right;">Genetica_07</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">0</td>
<td style="text-align: right;">14</td>
<td style="text-align: right;">101.82</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">5.65</td>
<td style="text-align: right;">13.65</td>
<td style="text-align: right;">125.71</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">84.29</td>
<td style="text-align: right;">1.48</td>
<td style="text-align: right;">30.35</td>
<td style="text-align: right;">35.68</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">28.397013</td>
<td style="text-align: right;">7.363183</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0.9665678</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">1.292175</td>
<td style="text-align: right;">0.2417377</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">0</td>
<td style="text-align: right;">17</td>
<td style="text-align: right;">80.41</td>
<td style="text-align: right;">85.53</td>
<td style="text-align: right;">55.68</td>
<td style="text-align: right;">124.52</td>
<td style="text-align: right;">159.70</td>
<td style="text-align: right;">62.37</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">5.65</td>
<td style="text-align: right;">17.83</td>
<td style="text-align: right;">154.53</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">99.42</td>
<td style="text-align: right;">1.34</td>
<td style="text-align: right;">33.99</td>
<td style="text-align: right;">33.01</td>
<td style="text-align: right;">138.73119</td>
<td style="text-align: right;">16.769985</td>
<td style="text-align: right;">17.764831</td>
<td style="text-align: right;">0.4550571</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0.0044324</td>
</tr>
<tr class="odd">
<td style="text-align: left;">0</td>
<td style="text-align: right;">14</td>
<td style="text-align: right;">91.00</td>
<td style="text-align: right;">79.76</td>
<td style="text-align: right;">94.28</td>
<td style="text-align: right;">140.68</td>
<td style="text-align: right;">100.07</td>
<td style="text-align: right;">86.33</td>
<td style="text-align: right;">26.24</td>
<td style="text-align: right;">3.18</td>
<td style="text-align: right;">13.09</td>
<td style="text-align: right;">135.88</td>
<td style="text-align: right;">81.53</td>
<td style="text-align: right;">5.75</td>
<td style="text-align: right;">109.45</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">30.44</td>
<td style="text-align: right;">34.21</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">21.382220</td>
<td style="text-align: right;">7.061147</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">0</td>
<td style="text-align: right;">21</td>
<td style="text-align: right;">86.99</td>
<td style="text-align: right;">91.33</td>
<td style="text-align: right;">93.65</td>
<td style="text-align: right;">115.00</td>
<td style="text-align: right;">123.01</td>
<td style="text-align: right;">66.84</td>
<td style="text-align: right;">10.23</td>
<td style="text-align: right;">3.48</td>
<td style="text-align: right;">11.97</td>
<td style="text-align: right;">132.15</td>
<td style="text-align: right;">90.66</td>
<td style="text-align: right;">2.58</td>
<td style="text-align: right;">68.60</td>
<td style="text-align: right;">1.04</td>
<td style="text-align: right;">30.10</td>
<td style="text-align: right;">34.00</td>
<td style="text-align: right;">48.83394</td>
<td style="text-align: right;">7.785552</td>
<td style="text-align: right;">20.442332</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">0</td>
<td style="text-align: right;">16</td>
<td style="text-align: right;">114.25</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">8.14</td>
<td style="text-align: right;">5.68</td>
<td style="text-align: right;">12.25</td>
<td style="text-align: right;">149.89</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">91.22</td>
<td style="text-align: right;">1.28</td>
<td style="text-align: right;">35.86</td>
<td style="text-align: right;">40.11</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">18.489371</td>
<td style="text-align: right;">10.365972</td>
<td style="text-align: right;">1.5581016</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">1.15977</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0.6242926</td>
<td style="text-align: right;">0.0579575</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="folds-creando-conjuntos-de-validación" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">5.4. Folds, creando conjuntos de validación</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb16-1" class="hljs-ln-code"><a href="#cb16-1"></a><span class="co"># 🔴 Creamos Folds 🔴</span></span>
<span id="cb16-2" class="hljs-ln-code"><a href="#cb16-2"></a></span>
<span id="cb16-3" class="hljs-ln-code"><a href="#cb16-3"></a>Folds_training <span class="ot">&lt;-</span> <span class="fu">vfold_cv</span>(Training_datos, <span class="at">v =</span> <span class="dv">5</span> ,<span class="at">strata =</span> Var_respuesta)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>#  5-fold cross-validation using stratification 
# A tibble: 5 × 2
  splits           id   
  &lt;list&gt;           &lt;chr&gt;
1 &lt;split [158/40]&gt; Fold1
2 &lt;split [158/40]&gt; Fold2
3 &lt;split [158/40]&gt; Fold3
4 &lt;split [159/39]&gt; Fold4
5 &lt;split [159/39]&gt; Fold5</code></pre>
</div>
</div>
</section></section>
<section>
<section id="pre-procesamiento-de-datos-con-parsnip" class="title-slide slide level1 center">
<h1>6. Pre-procesamiento de datos con Parsnip</h1>

</section>
<section id="pre-procesamiento-de-datos" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">6.1. Pre-procesamiento de datos</h2>
<div>
<ol type="1">
<li class="fragment">Imputación</li>
<li class="fragment">Normalización</li>
<li class="fragment">Re-equilibración de grupos</li>
<li class="fragment">Conversión</li>
</ol>
</div>
</section>
<section id="pre-procesamiento-de-datos-1" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">6.1. Pre-procesamiento de datos</h2>
<p style="margin-top:200px">
¿Debemos ejecutar el pre-procesamiento una y otra vez?
</p>
</section>
<section id="pre-procesamiento-de-datos-2" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">6.1. Pre-procesamiento de datos</h2>
<div class="quarto-layout-panel">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-layout-cell" style="flex-basis: 53.5%;justify-content: center;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="Imagenes/meme_kuzco.jpeg" width="400"></p>
</figure>
</div>
</div>
<div class="quarto-layout-cell" style="flex-basis: 46.5%;justify-content: center;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="Imagenes/logo_recipes.png" width="347"></p>
</figure>
</div>
</div>
</div>
</div>
</section>
<section id="cómo-cocinamos-una-receta" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">6.2. ¿Cómo cocinamos una receta?</h2>
<div>
Para poder elaborar un flujo completo de pre-procesamiento debemos seguir los siguientes pasos:
<div style="font-size:32px">
<ul>
<li class="fragment"><strong>Recipe</strong>: la base. Requiere de qué fórmula queremos para el modelo y de qué conjunto de datos partimos. Los datos aquí incorporados serán los datos de entrenamiento.</li>
<li class="fragment"><strong>Step</strong>: el proceso que queramos aplicar a nuestros datos, cualquier transofrmación de datos va aquí.</li>
<li class="fragment"><strong>Prep</strong>: la receta se prepara, es decir, se aplica al conjunto de entrenamiento y se abstrae para un modelado cualquiera.</li>
<li class="fragment"><strong>Bake</strong>: pone el pre-procesamiento en producción para un conjunto de datos cualquiera.</li>
</ul>
</div>
</div>
</section>
<section id="hagamos-un-ejemplo" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">6.2.1. Hagamos un ejemplo</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb18-1" class="hljs-ln-code"><a href="#cb18-1"></a>Ejemplo_receta <span class="ot">&lt;-</span> Training_datos <span class="sc">%&gt;%</span> </span>
<span id="cb18-2" class="hljs-ln-code"><a href="#cb18-2"></a>  <span class="co"># 🔴 1. Recipe (crea la fórmula generalizada del modelo) </span></span>
<span id="cb18-3" class="hljs-ln-code"><a href="#cb18-3"></a>  <span class="fu">recipe</span>(  </span>
<span id="cb18-4" class="hljs-ln-code"><a href="#cb18-4"></a>    <span class="fu">as.formula</span>(<span class="st">"Var_respuesta ~ Cognicion_01 +Cognicion_02+Escala_01+Escala_02"</span>),</span>
<span id="cb18-5" class="hljs-ln-code"><a href="#cb18-5"></a>    <span class="at">data =</span> . , </span>
<span id="cb18-6" class="hljs-ln-code"><a href="#cb18-6"></a>    <span class="at">strata =</span> Var_respuesta )  <span class="sc">%&gt;%</span> </span>
<span id="cb18-7" class="hljs-ln-code"><a href="#cb18-7"></a>  <span class="co"># 🔴 2. step</span></span>
<span id="cb18-8" class="hljs-ln-code"><a href="#cb18-8"></a>  <span class="co"># 🟡 En este caso no aplicamos ninguna transformación </span></span>
<span id="cb18-9" class="hljs-ln-code"><a href="#cb18-9"></a>  <span class="co"># Step_log</span></span>
<span id="cb18-10" class="hljs-ln-code"><a href="#cb18-10"></a>  <span class="co"># 🔴 3. Prep (asienta la receta y generalízala) </span></span>
<span id="cb18-11" class="hljs-ln-code"><a href="#cb18-11"></a>  <span class="fu">prep</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb18-12" class="hljs-ln-code"><a href="#cb18-12"></a>  <span class="co"># 🔴 4. Bake (pon la receta en producción/comprueba qué tal ha funcionado)</span></span>
<span id="cb18-13" class="hljs-ln-code"><a href="#cb18-13"></a>  <span class="fu">bake</span>(., <span class="at">new_data=</span><span class="cn">NULL</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<table>
<thead>
<tr class="header">
<th style="text-align: right;">Cognicion_01</th>
<th style="text-align: right;">Cognicion_02</th>
<th style="text-align: right;">Escala_01</th>
<th style="text-align: right;">Escala_02</th>
<th style="text-align: left;">Var_respuesta</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">66.78</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">133.149284</td>
<td style="text-align: right;">18.11677</td>
<td style="text-align: left;">0</td>
</tr>
<tr class="even">
<td style="text-align: right;">108.18</td>
<td style="text-align: right;">84.49</td>
<td style="text-align: right;">68.943373</td>
<td style="text-align: right;">12.18331</td>
<td style="text-align: left;">0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">2.898493</td>
<td style="text-align: right;">11.23652</td>
<td style="text-align: left;">0</td>
</tr>
<tr class="even">
<td style="text-align: right;">52.88</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">99.600374</td>
<td style="text-align: right;">25.02682</td>
<td style="text-align: left;">0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">109.25</td>
<td style="text-align: right;">88.04</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">16.79845</td>
<td style="text-align: left;">0</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="imputación-múltiple" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">6.2.2. Imputación múltiple</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb19-1" class="hljs-ln-code"><a href="#cb19-1"></a>Imputacion_multiple <span class="ot">&lt;-</span> Training_datos <span class="sc">%&gt;%</span> </span>
<span id="cb19-2" class="hljs-ln-code"><a href="#cb19-2"></a>  <span class="co"># 🔴 1. Recipe (crea la fórmula generalizada del modelo) </span></span>
<span id="cb19-3" class="hljs-ln-code"><a href="#cb19-3"></a>  <span class="fu">recipe</span>(  </span>
<span id="cb19-4" class="hljs-ln-code"><a href="#cb19-4"></a>    <span class="fu">as.formula</span>(<span class="st">"Var_respuesta ~ Cognicion_01 +Cognicion_02+Escala_01+Escala_02"</span>),</span>
<span id="cb19-5" class="hljs-ln-code"><a href="#cb19-5"></a>    <span class="at">data =</span> . , </span>
<span id="cb19-6" class="hljs-ln-code"><a href="#cb19-6"></a>    <span class="at">strata =</span> Var_respuesta )  <span class="sc">%&gt;%</span> </span>
<span id="cb19-7" class="hljs-ln-code"><a href="#cb19-7"></a>  <span class="co"># 🔴 2. Step (haz la transformación que requieras) </span></span>
<span id="cb19-8" class="hljs-ln-code"><a href="#cb19-8"></a>  <span class="co"># 🟡 Este step será la imputación por regresiópn lineal con otras covariables</span></span>
<span id="cb19-9" class="hljs-ln-code"><a href="#cb19-9"></a>  <span class="fu">step_impute_linear</span>( Cognicion_02, <span class="at">impute_with =</span> <span class="fu">imp_vars</span>(Cognicion_01, Escala_02) ) <span class="sc">%&gt;%</span></span>
<span id="cb19-10" class="hljs-ln-code"><a href="#cb19-10"></a>  <span class="co"># 🔴 3. Prep (asienta la receta y generalízala) </span></span>
<span id="cb19-11" class="hljs-ln-code"><a href="#cb19-11"></a>  <span class="fu">prep</span>() <span class="sc">%&gt;%</span></span>
<span id="cb19-12" class="hljs-ln-code"><a href="#cb19-12"></a>  <span class="co"># 🔴 4. Bake (pon la receta en producción/comprueba qué tal ha funcionado)</span></span>
<span id="cb19-13" class="hljs-ln-code"><a href="#cb19-13"></a>  <span class="fu">bake</span>(., <span class="at">new_data=</span><span class="cn">NULL</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<table>
<thead>
<tr class="header">
<th style="text-align: right;">Cognicion_01</th>
<th style="text-align: right;">Cognicion_02</th>
<th style="text-align: right;">Escala_01</th>
<th style="text-align: right;">Escala_02</th>
<th style="text-align: left;">Var_respuesta</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">66.78</td>
<td style="text-align: right;">95.30378</td>
<td style="text-align: right;">133.149284</td>
<td style="text-align: right;">18.11677</td>
<td style="text-align: left;">0</td>
</tr>
<tr class="even">
<td style="text-align: right;">108.18</td>
<td style="text-align: right;">84.49000</td>
<td style="text-align: right;">68.943373</td>
<td style="text-align: right;">12.18331</td>
<td style="text-align: left;">0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">105.71896</td>
<td style="text-align: right;">2.898493</td>
<td style="text-align: right;">11.23652</td>
<td style="text-align: left;">0</td>
</tr>
<tr class="even">
<td style="text-align: right;">52.88</td>
<td style="text-align: right;">97.79188</td>
<td style="text-align: right;">99.600374</td>
<td style="text-align: right;">25.02682</td>
<td style="text-align: left;">0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">109.25</td>
<td style="text-align: right;">88.04000</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">16.79845</td>
<td style="text-align: left;">0</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="pca" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">6.2.3. PCA</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb20-1" class="hljs-ln-code"><a href="#cb20-1"></a>PCA <span class="ot">&lt;-</span> Training_datos <span class="sc">%&gt;%</span> </span>
<span id="cb20-2" class="hljs-ln-code"><a href="#cb20-2"></a>  <span class="co"># 🔴 1. Recipe (crea la fórmula generalizada del modelo) </span></span>
<span id="cb20-3" class="hljs-ln-code"><a href="#cb20-3"></a>  <span class="fu">recipe</span>(  </span>
<span id="cb20-4" class="hljs-ln-code"><a href="#cb20-4"></a>    <span class="fu">as.formula</span>(<span class="st">"Var_respuesta ~ Cognicion_01 + Cognicion_02 + Cognicion_03 + Escala_01 + Escala_02  + Escala_03"</span>),</span>
<span id="cb20-5" class="hljs-ln-code"><a href="#cb20-5"></a>    <span class="at">data =</span> . , </span>
<span id="cb20-6" class="hljs-ln-code"><a href="#cb20-6"></a>    <span class="at">strata =</span> Var_respuesta )  <span class="sc">%&gt;%</span> </span>
<span id="cb20-7" class="hljs-ln-code"><a href="#cb20-7"></a>  <span class="co"># 🔴 2. Step (haz la transformación que requieras) </span></span>
<span id="cb20-8" class="hljs-ln-code"><a href="#cb20-8"></a>  <span class="co"># 🟡 Este step será la imputación por regresión lineal con otras covariables</span></span>
<span id="cb20-9" class="hljs-ln-code"><a href="#cb20-9"></a>  <span class="fu">step_impute_bag</span>(<span class="fu">all_numeric</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb20-10" class="hljs-ln-code"><a href="#cb20-10"></a>  <span class="fu">step_pca</span>( Cognicion_01 , Cognicion_02 , Cognicion_03, <span class="at">num_comp =</span> <span class="dv">2</span>,  <span class="at">id =</span> <span class="st">"pca"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb20-11" class="hljs-ln-code"><a href="#cb20-11"></a>  <span class="co"># 🔴 3. Prep (asienta la receta y generalízala) </span></span>
<span id="cb20-12" class="hljs-ln-code"><a href="#cb20-12"></a>  <span class="fu">prep</span>() <span class="sc">%&gt;%</span></span>
<span id="cb20-13" class="hljs-ln-code"><a href="#cb20-13"></a>  <span class="co"># 🔴 4. Bake (pon la receta en producción/comprueba qué tal ha funcionado)</span></span>
<span id="cb20-14" class="hljs-ln-code"><a href="#cb20-14"></a>  <span class="fu">tidy</span>(<span class="at">id =</span> <span class="st">"pca"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<table>
<thead>
<tr class="header">
<th style="text-align: left;">terms</th>
<th style="text-align: right;">value</th>
<th style="text-align: left;">component</th>
<th style="text-align: left;">id</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Cognicion_01</td>
<td style="text-align: right;">-0.5965638</td>
<td style="text-align: left;">PC1</td>
<td style="text-align: left;">pca</td>
</tr>
<tr class="even">
<td style="text-align: left;">Cognicion_02</td>
<td style="text-align: right;">-0.6139563</td>
<td style="text-align: left;">PC1</td>
<td style="text-align: left;">pca</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Cognicion_03</td>
<td style="text-align: right;">-0.5168842</td>
<td style="text-align: left;">PC1</td>
<td style="text-align: left;">pca</td>
</tr>
<tr class="even">
<td style="text-align: left;">Cognicion_01</td>
<td style="text-align: right;">0.7387621</td>
<td style="text-align: left;">PC2</td>
<td style="text-align: left;">pca</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Cognicion_02</td>
<td style="text-align: right;">-0.6717387</td>
<td style="text-align: left;">PC2</td>
<td style="text-align: left;">pca</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="remuestrear" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">6.2.4. Remuestrear</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb21-1" class="hljs-ln-code"><a href="#cb21-1"></a><span class="co"># 🔴 Librería que permite instalar algoritmos y hacer sobremuestreo en Tidymodels.</span></span>
<span id="cb21-2" class="hljs-ln-code"><a href="#cb21-2"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(themis)</span>
<span id="cb21-3" class="hljs-ln-code"><a href="#cb21-3"></a></span>
<span id="cb21-4" class="hljs-ln-code"><a href="#cb21-4"></a>Training_datos_adasyn <span class="ot">&lt;-</span> Training_datos <span class="sc">%&gt;%</span> </span>
<span id="cb21-5" class="hljs-ln-code"><a href="#cb21-5"></a>  <span class="co"># 1. Recipe (crea la fórmula generalizada del modelo) </span></span>
<span id="cb21-6" class="hljs-ln-code"><a href="#cb21-6"></a>  <span class="fu">recipe</span>(  </span>
<span id="cb21-7" class="hljs-ln-code"><a href="#cb21-7"></a>    <span class="fu">as.formula</span>(<span class="st">"Var_respuesta ~ Cognicion_01 +Cognicion_02+Escala_01+Escala_02"</span>),</span>
<span id="cb21-8" class="hljs-ln-code"><a href="#cb21-8"></a>    <span class="at">data =</span> . , </span>
<span id="cb21-9" class="hljs-ln-code"><a href="#cb21-9"></a>    <span class="at">strata =</span> Var_respuesta )  <span class="sc">%&gt;%</span> </span>
<span id="cb21-10" class="hljs-ln-code"><a href="#cb21-10"></a>  <span class="co">#  2. Step (haz la transoformación que requieras) </span></span>
<span id="cb21-11" class="hljs-ln-code"><a href="#cb21-11"></a>  <span class="co">#  step de  imputación por árboles manteniendo la estructura de todas las covariables</span></span>
<span id="cb21-12" class="hljs-ln-code"><a href="#cb21-12"></a>  <span class="fu">step_impute_bag</span>(<span class="fu">all_numeric</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb21-13" class="hljs-ln-code"><a href="#cb21-13"></a>  <span class="co"># 🔴 step para sobremuestrear el nivel menor en la variable respuesta.</span></span>
<span id="cb21-14" class="hljs-ln-code"><a href="#cb21-14"></a>  <span class="fu">step_adasyn</span>(Var_respuesta, <span class="at">over_ratio =</span> <span class="dv">1</span>, <span class="at">neighbors =</span> <span class="dv">10</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb21-15" class="hljs-ln-code"><a href="#cb21-15"></a>  <span class="co">#  3. Prep (asienta la receta y generalízala) </span></span>
<span id="cb21-16" class="hljs-ln-code"><a href="#cb21-16"></a>  <span class="fu">prep</span>() <span class="sc">%&gt;%</span></span>
<span id="cb21-17" class="hljs-ln-code"><a href="#cb21-17"></a>  <span class="co">#  4. Bake (pon la receta en producción/comprueba qué tal ha funcionado)</span></span>
<span id="cb21-18" class="hljs-ln-code"><a href="#cb21-18"></a>  <span class="fu">bake</span>(., <span class="at">new_data=</span><span class="cn">NULL</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="remuestrear-1" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">6.2.4. Remuestrear</h2>

<img data-src="Presentacion_Tidymodels_files/figure-revealjs/unnamed-chunk-22-1.png" width="960" class="r-stretch"></section>
<section id="caso-práctico-receta" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">6.3. Caso práctico: Receta</h2>
<div style="margin-top:200px">
<p><span class="math display">\[ \textbf{VarRespuesta} \sim Cognicion01 + Cognicion02 +\\
    Cognicion03 + Cognicion04 + Cognicion05 + \\
    Escala01 + Escala02 + Escala03 \]</span></p>
</div>
</section>
<section id="caso-práctico-receta-1" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">6.3. Caso práctico: Receta</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb22-1" class="hljs-ln-code"><a href="#cb22-1"></a><span class="co"># 🔴 1.) Iniciamos la receta</span></span>
<span id="cb22-2" class="hljs-ln-code"><a href="#cb22-2"></a>Receta_modelo_1 <span class="ot">&lt;-</span> <span class="fu">recipe</span>(  </span>
<span id="cb22-3" class="hljs-ln-code"><a href="#cb22-3"></a>    <span class="at">formula =</span> Receta_modelo_1_formula,</span>
<span id="cb22-4" class="hljs-ln-code"><a href="#cb22-4"></a>    <span class="at">data =</span> Training_datos , </span>
<span id="cb22-5" class="hljs-ln-code"><a href="#cb22-5"></a>    <span class="at">strata =</span> Var_respuesta)  <span class="sc">%&gt;%</span> </span>
<span id="cb22-6" class="hljs-ln-code"><a href="#cb22-6"></a>  <span class="co"># 🔴 2.) Steps</span></span>
<span id="cb22-7" class="hljs-ln-code"><a href="#cb22-7"></a>    <span class="co">#  🟡 2.1) Eliminamos las variables que contengan más de un 20% de datos perdidos </span></span>
<span id="cb22-8" class="hljs-ln-code"><a href="#cb22-8"></a>  <span class="fu">step_filter_missing</span>(<span class="fu">all_predictors</span>(),  <span class="at">threshold =</span> <span class="fl">0.1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb22-9" class="hljs-ln-code"><a href="#cb22-9"></a>    <span class="co">#  🟡 2.2) Imputamos las variables numéricas con un algoritmo de bagged trees</span></span>
<span id="cb22-10" class="hljs-ln-code"><a href="#cb22-10"></a>  <span class="fu">step_impute_bag</span>(<span class="fu">all_numeric</span>(),<span class="sc">-</span><span class="fu">all_outcomes</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb22-11" class="hljs-ln-code"><a href="#cb22-11"></a>    <span class="co">#  🟡 2.3) Normalizamos los datos (restamos la media)</span></span>
<span id="cb22-12" class="hljs-ln-code"><a href="#cb22-12"></a>  <span class="fu">step_normalize</span>(<span class="fu">all_numeric</span>(),<span class="sc">-</span><span class="fu">all_outcomes</span>() ) <span class="sc">%&gt;%</span> </span>
<span id="cb22-13" class="hljs-ln-code"><a href="#cb22-13"></a>    <span class="co">#  🟡 2.4) Escalamos los datos (reducimos a escala entre 0 y 1)</span></span>
<span id="cb22-14" class="hljs-ln-code"><a href="#cb22-14"></a>  <span class="fu">step_scale</span>(<span class="fu">all_numeric</span>(),<span class="sc">-</span><span class="fu">all_outcomes</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb22-15" class="hljs-ln-code"><a href="#cb22-15"></a>    <span class="co">#  🟡 2.5) Convertimos a Dummy las variables factor (no hará nada por que no tenemos variables factor)</span></span>
<span id="cb22-16" class="hljs-ln-code"><a href="#cb22-16"></a>  <span class="fu">step_dummy</span>(<span class="fu">all_nominal</span>(), <span class="sc">-</span><span class="fu">all_outcomes</span>(), <span class="at">one_hot =</span> T) <span class="sc">%&gt;%</span> </span>
<span id="cb22-17" class="hljs-ln-code"><a href="#cb22-17"></a>    <span class="co">#  🟡 2.6) Sobre muestreamos la variable para equilibrar grupos</span></span>
<span id="cb22-18" class="hljs-ln-code"><a href="#cb22-18"></a>  <span class="fu">step_adasyn</span>(Var_respuesta, <span class="at">over_ratio =</span> <span class="dv">1</span>, <span class="at">neighbors =</span> <span class="dv">10</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section></section>
<section>
<section id="dónde-está-el-modelo-creando-modelos-con-parsnip" class="title-slide slide level1 center">
<h1>7. ¿Dónde está el modelo? Creando modelos con Parsnip</h1>

</section>
<section id="modelos-a-la-carrera-con-parsnip" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">7.1. Modelos a la carrera con Parsnip</h2>

<img data-src="Imagenes/parsnip_img.jpeg" class="r-stretch quarto-figure-center"></section>
<section id="modelos-a-la-carrera-con-parsnip-1" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">7.1. Modelos a la carrera con Parsnip</h2>
<img data-src="Imagenes/search_parsnip_models.png" data-fig-align="center" width="3500">
<p style="font-size:20px; text-align: center;">
<a href="https://www.tidymodels.org/find/parsnip/">Search Parsnip Models</a>
</p>
</section>
<section id="empezamos-a-modelar" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">7.2. Empezamos a modelar</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb23-1" class="hljs-ln-code"><a href="#cb23-1"></a><span class="co"># 🔴 Ver los posibles motores de un tipo de modelo</span></span>
<span id="cb23-2" class="hljs-ln-code"><a href="#cb23-2"></a><span class="fu">show_engines</span>(<span class="st">'logistic_reg'</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="empezamos-a-modelar-1" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">7.2. Empezamos a modelar</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb24-1" class="hljs-ln-code"><a href="#cb24-1"></a><span class="fu">logistic_reg</span>(</span>
<span id="cb24-2" class="hljs-ln-code"><a href="#cb24-2"></a>  <span class="at">engine =</span> <span class="st">"glmnet"</span>,</span>
<span id="cb24-3" class="hljs-ln-code"><a href="#cb24-3"></a>  <span class="co">#Hiperparámetros           </span></span>
<span id="cb24-4" class="hljs-ln-code"><a href="#cb24-4"></a>  <span class="at">penalty =</span> <span class="cn">NULL</span>, <span class="at">mixture =</span> <span class="cn">NULL</span>, <span class="at">mode =</span> <span class="st">'classification'</span>)</span>
<span id="cb24-5" class="hljs-ln-code"><a href="#cb24-5"></a></span>
<span id="cb24-6" class="hljs-ln-code"><a href="#cb24-6"></a></span>
<span id="cb24-7" class="hljs-ln-code"><a href="#cb24-7"></a><span class="fu">logistic_reg</span>(</span>
<span id="cb24-8" class="hljs-ln-code"><a href="#cb24-8"></a>  <span class="at">engine =</span> <span class="st">"glmnet"</span>,</span>
<span id="cb24-9" class="hljs-ln-code"><a href="#cb24-9"></a>  <span class="co">#Hiperparámetros           </span></span>
<span id="cb24-10" class="hljs-ln-code"><a href="#cb24-10"></a>  <span class="at">penalty =</span> <span class="dv">0</span>, <span class="at">mixture =</span> <span class="dv">0</span>, <span class="at">mode =</span> <span class="st">'classification'</span>)</span>
<span id="cb24-11" class="hljs-ln-code"><a href="#cb24-11"></a></span>
<span id="cb24-12" class="hljs-ln-code"><a href="#cb24-12"></a></span>
<span id="cb24-13" class="hljs-ln-code"><a href="#cb24-13"></a><span class="fu">logistic_reg</span>(</span>
<span id="cb24-14" class="hljs-ln-code"><a href="#cb24-14"></a>  <span class="at">engine =</span> <span class="st">"glmnet"</span>,</span>
<span id="cb24-15" class="hljs-ln-code"><a href="#cb24-15"></a>  <span class="co">#Hiperparámetros           </span></span>
<span id="cb24-16" class="hljs-ln-code"><a href="#cb24-16"></a>  <span class="at">penalty =</span> <span class="fu">tune</span>(), <span class="at">mixture =</span> <span class="fu">tune</span>(), <span class="at">mode =</span> <span class="st">'classification'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="caso-práctico-modelo-de-random-forest" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">7.3. Caso práctico: modelo de Random Forest</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb25-1" class="hljs-ln-code"><a href="#cb25-1"></a>Model_RandomForest <span class="ot">&lt;-</span> </span>
<span id="cb25-2" class="hljs-ln-code"><a href="#cb25-2"></a>  <span class="co"># 🔴 Especificamos el modelo que queremos, en este caso un random forest</span></span>
<span id="cb25-3" class="hljs-ln-code"><a href="#cb25-3"></a>  <span class="fu">rand_forest</span>(</span>
<span id="cb25-4" class="hljs-ln-code"><a href="#cb25-4"></a>  <span class="co"># 🟡 Ajustamos los hiperparámetros </span></span>
<span id="cb25-5" class="hljs-ln-code"><a href="#cb25-5"></a>    <span class="at">mtry =</span> <span class="fu">tune</span>(),  <span class="at">trees =</span> <span class="fu">tune</span>(),  <span class="at">min_n =</span> <span class="fu">tune</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb25-6" class="hljs-ln-code"><a href="#cb25-6"></a>  <span class="co"># 🔴 Ponemos el motor, es decir, la librería por la queremos que se ejecute el modelo</span></span>
<span id="cb25-7" class="hljs-ln-code"><a href="#cb25-7"></a>  <span class="fu">set_engine</span>(<span class="st">"ranger"</span>, <span class="at">importance =</span> <span class="st">"impurity"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb25-8" class="hljs-ln-code"><a href="#cb25-8"></a>  <span class="co"># 🔴 Ajustamos el modo del modelo, es decir, si queremos regresión o clasifiación </span></span>
<span id="cb25-9" class="hljs-ln-code"><a href="#cb25-9"></a>  <span class="fu">set_mode</span>(<span class="st">"classification"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section></section>
<section>
<section id="unificando-todo-workflow" class="title-slide slide level1 center">
<h1>8. Unificando todo: Workflow</h1>

</section>
<section id="unificando-todo-workflow-1" class="slide level2">
<h2>8. Unificando todo: Workflow</h2>
<div class="columns">
<div class="column" style="width:20%;">
<div style="margin-top:100px">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="Imagenes/workflows_logo.png" width="300"></p>
</figure>
</div>
</div>
</div><div class="column" style="width:80%;">
<div style="font-size:32px;">
<p>Un flujo de trabajo (Workflow) es un objeto que puede agrupar preprocesamiento, modelado y postprocesamiento.</p>
<ul>
<li>La preparación de la receta y el ajuste del modelo pueden ejecutarse utilizando una única llamada a <code>fit()</code>.</li>
<li>Si tiene configuración personalizada de parámetros de ajuste, éstos pueden definirse utilizando una interfaz más sencilla cuando se combinan con tune.</li>
<li>En el futuro, los flujos de trabajo podrán añadir operaciones de postprocesamiento, como modificar el corte de probabilidad para modelos de dos clases.</li>
</ul>
</div>
</div>
</div>
</section>
<section id="unificando-todo-workflow-2" class="slide level2">
<h2>8. Unificando todo: Workflow</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1"></a>WF_Receta_modelo_1_Random_forest <span class="ot">&lt;-</span> </span>
<span id="cb26-2"><a href="#cb26-2"></a>  <span class="co"># 🔴 Activamos el workflow </span></span>
<span id="cb26-3"><a href="#cb26-3"></a>  <span class="fu">workflow</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb26-4"><a href="#cb26-4"></a>  <span class="co"># 🔴 Añadimos la receta</span></span>
<span id="cb26-5"><a href="#cb26-5"></a>  <span class="fu">add_recipe</span>(Receta_modelo_1) <span class="sc">%&gt;%</span> </span>
<span id="cb26-6"><a href="#cb26-6"></a>  <span class="co"># 🔴 Añadimos el modelo</span></span>
<span id="cb26-7"><a href="#cb26-7"></a>  <span class="fu">add_model</span>(Model_RandomForest)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>══ Workflow ════════════════════════════════════════════════════════════════════
Preprocessor: Recipe
Model: rand_forest()

── Preprocessor ────────────────────────────────────────────────────────────────
6 Recipe Steps

• step_filter_missing()
• step_impute_bag()
• step_normalize()
• step_scale()
• step_dummy()
• step_adasyn()

── Model ───────────────────────────────────────────────────────────────────────
Random Forest Model Specification (classification)

Main Arguments:
  mtry = tune()
  trees = tune()
  min_n = tune()

Engine-Specific Arguments:
  importance = impurity

Computational engine: ranger </code></pre>
</div>
</div>
</section></section>
<section>
<section id="eligiendo-métricas-con-yardstick" class="title-slide slide level1 center" data-auto-animate="true">
<h1 data-id="quarto-animate-title">9. Eligiendo métricas con Yardstick</h1>

</section>
<section id="eligiendo-métricas-con-yardstick-1" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">9. Eligiendo métricas con Yardstick</h2>
<div class="columns">
<div class="column" style="width:20%;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="Imagenes/yardstick_logo.png" width="300"></p>
</figure>
</div>
</div><div class="column" style="width:80%;">
<ul>
<li>Yardstick es un paquete para estimar lo bien que funcionan los modelos, dentro del workflow o de forma aislada.
<p style="font-size:25px; margin-top:20px">
<a href="https://yardstick.tidymodels.org/articles/custom-metrics.html">Más información</a>
</p></li>
</ul>
</div>
</div>
</section>
<section id="eligiendo-métricas-con-yardstick-2" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">9. Eligiendo métricas con Yardstick</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb28-1" class="hljs-ln-code"><a href="#cb28-1"></a><span class="co"># 🔴 Seleccionamos las métricas que queremos para nuestro modelo</span></span>
<span id="cb28-2" class="hljs-ln-code"><a href="#cb28-2"></a>Modelo_Metricas <span class="ot">&lt;-</span> <span class="fu">metric_set</span>(accuracy, j_index, precision, sensitivity, specificity, roc_auc, f_meas,recall, mcc)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>A metric set, consisting of:
- `accuracy()`, a class metric      | direction: maximize
- `j_index()`, a class metric       | direction: maximize
- `precision()`, a class metric     | direction: maximize
- `sensitivity()`, a class metric   | direction: maximize
- `specificity()`, a class metric   | direction: maximize
- `roc_auc()`, a probability metric | direction: maximize
- `f_meas()`, a class metric        | direction: maximize
- `recall()`, a class metric        | direction: maximize
- `mcc()`, a class metric           | direction: maximize</code></pre>
</div>
</div>
</section></section>
<section>
<section id="eligiendo-hiperparámetros-tune-y-dials" class="title-slide slide level1 center">
<h1>10. Eligiendo hiperparámetros: Tune y Dials</h1>

</section>
<section id="eligiendo-hiperparámetros-tune-y-dials-1" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">10.1. Eligiendo hiperparámetros: Tune y Dials</h2>
<div>
<ul>
<li class="fragment">Los paquetes <em>Tune</em> y <em>Dials</em> son los que nos permiten hacer esta selección y control. Aquí se crea todo un subflujo de trabajo para el ajuste de hiperparámetros.</li>
</ul>
</div>
</section>
<section id="eligiendo-hiperparámetros-tune-y-dials-2" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">10.1. Eligiendo hiperparámetros: Tune y Dials</h2>
<ul>
<li>Los paquetes <em>Tune</em> y <em>Dials</em> son los que nos permiten hacer esta selección y control. Aquí se crea todo un subflujo de trabajo para el ajuste de hiperparámetros.</li>
</ul>
<div class="quarto-layout-panel">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="Imagenes/logo_tune.png" width="217"></p>
</figure>
</div>
</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="Imagenes/logo_dials.png" width="217"></p>
</figure>
</div>
</div>
</div>
</div>
</section>
<section id="eligiendo-hiperparámetros-tune-y-dials-3" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">10.1. Eligiendo hiperparámetros: Tune y Dials</h2>
<div>
<ol type="1">
<li class="fragment"><p>Creamos unas réplicas del conjunto de entrenamiento, Rsample con el objeto <em>cv_Folds</em></p></li>
<li class="fragment"><p>Elegimos un modelo con Parsnip y dejamos sus hiperparámetros en abierto con <code>tune()</code>.</p></li>
<li class="fragment"><p>Creamos una cuadrícula (grid) con diferentes posibles combinaciones de los hiperparámetros</p></li>
<li class="fragment"><p>Ponemos todo junto con la función <code>tune_grid()</code>.</p></li>
</ol>
</div>
</section>
<section id="montando-un-espacio-de-hiperparámetros-familia-grid_" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">10.2. Montando un espacio de hiperparámetros: familia <code>grid_</code></h2>
<div>
<ul>
<li class="fragment"><code>grid_regular</code>: hará todas las combinaciones entre los rangos de la variable.</li>
<li class="fragment"><code>grid_random</code>: probará hiperparámetros aleatoriamente.</li>
<li class="fragment"><code>grid_max_entropy</code>: propondrá una combinación de hiperpárametros que garantice que se cubrirá todo el espectro, con fin de evitar mínimos locales en la conversión de algoritmos.</li>
<li class="fragment"><code>grid_latin_hypercube</code>: propondrá una matriz.</li>
</ul>
</div>
</section>
<section id="grid_regular" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">10.2.1. Grid_regular()</h2>
<ul>
<li><code>Grid_regular</code> hará las combinaciones acorde al rango que le hayamos dado. Por defecto hace la combinación entre el mínimo, el medio y el máximo de cada valor.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb30-1" class="hljs-ln-code"><a href="#cb30-1"></a><span class="fu">grid_regular</span>(</span>
<span id="cb30-2" class="hljs-ln-code"><a href="#cb30-2"></a>  <span class="fu">mtry</span>(<span class="at">range  =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">10</span>)),</span>
<span id="cb30-3" class="hljs-ln-code"><a href="#cb30-3"></a>  <span class="fu">min_n</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">10</span>)),</span>
<span id="cb30-4" class="hljs-ln-code"><a href="#cb30-4"></a>  <span class="fu">trees</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">10</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 27 × 3
    mtry min_n trees
   &lt;int&gt; &lt;int&gt; &lt;int&gt;
 1     2     2     2
 2     6     2     2
 3    10     2     2
 4     2     6     2
 5     6     6     2
 6    10     6     2
 7     2    10     2
 8     6    10     2
 9    10    10     2
10     2     2     6
# ℹ 17 more rows</code></pre>
</div>
</div>
</section>
<section id="grid_regular-1" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">10.2.1. Grid_regular()</h2>
<ul>
<li><code>Grid_regular</code> hará las combinaciones acorde al rango que le hayamos dado. Por defecto hace la combinación entre el mínimo, el medio y el máximo de cada valor.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb32-1" class="hljs-ln-code"><a href="#cb32-1"></a><span class="fu">grid_regular</span>(</span>
<span id="cb32-2" class="hljs-ln-code"><a href="#cb32-2"></a>  <span class="fu">mtry</span>(<span class="at">range  =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">10</span>)),</span>
<span id="cb32-3" class="hljs-ln-code"><a href="#cb32-3"></a>  <span class="fu">min_n</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">10</span>)),</span>
<span id="cb32-4" class="hljs-ln-code"><a href="#cb32-4"></a>  <span class="fu">trees</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">10</span>)),</span>
<span id="cb32-5" class="hljs-ln-code"><a href="#cb32-5"></a>  <span class="at">levels =</span> <span class="dv">4</span>) <span class="co"># Podemos ampliar con el parámetro levels: Ahora el mínimo será el cuantil 33 y el máximo el cuantil 66.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 64 × 3
    mtry min_n trees
   &lt;int&gt; &lt;int&gt; &lt;int&gt;
 1     2     2     2
 2     4     2     2
 3     7     2     2
 4    10     2     2
 5     2     4     2
 6     4     4     2
 7     7     4     2
 8    10     4     2
 9     2     7     2
10     4     7     2
# ℹ 54 more rows</code></pre>
</div>
</div>
</section>
<section id="grid_max_entropy" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">10.2.2. Grid_max_entropy()</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb34-1" class="hljs-ln-code"><a href="#cb34-1"></a><span class="fu">grid_max_entropy</span>(</span>
<span id="cb34-2" class="hljs-ln-code"><a href="#cb34-2"></a>  <span class="fu">mtry</span>(<span class="at">range  =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">4</span>)),</span>
<span id="cb34-3" class="hljs-ln-code"><a href="#cb34-3"></a>  <span class="fu">min_n</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">30</span>)),</span>
<span id="cb34-4" class="hljs-ln-code"><a href="#cb34-4"></a>  <span class="fu">trees</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1000</span>)),</span>
<span id="cb34-5" class="hljs-ln-code"><a href="#cb34-5"></a>  <span class="at">size =</span> <span class="dv">10</span></span>
<span id="cb34-6" class="hljs-ln-code"><a href="#cb34-6"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 3
    mtry min_n trees
   &lt;int&gt; &lt;int&gt; &lt;int&gt;
 1     2    19   631
 2     4    12   162
 3     3    23   452
 4     4    21     7
 5     3    29    98
 6     1    27    64
 7     3    13   363
 8     3    19   882
 9     1    29   750
10     2    10   839</code></pre>
</div>
</div>
</section>
<section id="hiperparámetros-dial-tune-yardstick" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">10.3. Hiperparámetros: Dial &amp; Tune + Yardstick</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb36-1" class="hljs-ln-code"><a href="#cb36-1"></a>WF_hiper_parametros <span class="ot">&lt;-</span> </span>
<span id="cb36-2" class="hljs-ln-code"><a href="#cb36-2"></a>  <span class="co"># 🔴 tune_grid()🔴</span></span>
<span id="cb36-3" class="hljs-ln-code"><a href="#cb36-3"></a>  <span class="fu">tune_grid</span>(</span>
<span id="cb36-4" class="hljs-ln-code"><a href="#cb36-4"></a>  <span class="co"># Receta de nuestro modelo, incluye el workflow </span></span>
<span id="cb36-5" class="hljs-ln-code"><a href="#cb36-5"></a>  <span class="at">object =</span> WF_Receta_modelo_1_Random_forest,</span>
<span id="cb36-6" class="hljs-ln-code"><a href="#cb36-6"></a>  <span class="co"># 🟡 Ponemos los Folds del conjunto de entrenamiento,  </span></span>
<span id="cb36-7" class="hljs-ln-code"><a href="#cb36-7"></a>  <span class="at">resamples =</span> Folds_training,</span>
<span id="cb36-8" class="hljs-ln-code"><a href="#cb36-8"></a>  <span class="co"># 🟡 Grid con diferentes hiperparámetros </span></span>
<span id="cb36-9" class="hljs-ln-code"><a href="#cb36-9"></a>  <span class="at">grid =</span> <span class="fu">grid_max_entropy</span>(</span>
<span id="cb36-10" class="hljs-ln-code"><a href="#cb36-10"></a>    <span class="fu">mtry</span>(<span class="at">range  =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">4</span>)),</span>
<span id="cb36-11" class="hljs-ln-code"><a href="#cb36-11"></a>    <span class="fu">min_n</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">30</span>)),</span>
<span id="cb36-12" class="hljs-ln-code"><a href="#cb36-12"></a>    <span class="fu">trees</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1000</span>)),</span>
<span id="cb36-13" class="hljs-ln-code"><a href="#cb36-13"></a>    <span class="at">size =</span> <span class="dv">10</span>),</span>
<span id="cb36-14" class="hljs-ln-code"><a href="#cb36-14"></a>  <span class="co"># 🟡 Métricas definidas anteriormente</span></span>
<span id="cb36-15" class="hljs-ln-code"><a href="#cb36-15"></a>  <span class="at">metrics =</span> Modelo_Metricas, </span>
<span id="cb36-16" class="hljs-ln-code"><a href="#cb36-16"></a>  <span class="co"># 🟡 Con esta opción podemos guardar las predicciones</span></span>
<span id="cb36-17" class="hljs-ln-code"><a href="#cb36-17"></a>  <span class="at">control =</span> <span class="fu">control_grid</span>( <span class="at">save_pred =</span> T)</span>
<span id="cb36-18" class="hljs-ln-code"><a href="#cb36-18"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="hiperparámetros-dial-tune-yardstick-1" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">10.3. Hiperparámetros: Dial &amp; Tune + Yardstick</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb37-1" class="hljs-ln-code"><a href="#cb37-1"></a>WF_hiperparametros_coleccion <span class="ot">&lt;-</span> </span>
<span id="cb37-2" class="hljs-ln-code"><a href="#cb37-2"></a>  WF_hiper_parametros <span class="sc">%&gt;%</span> </span>
<span id="cb37-3" class="hljs-ln-code"><a href="#cb37-3"></a>  <span class="fu">collect_metrics</span>() <span class="co"># 🔴 Esta es la función que retorna las métricas, importante tenerla en cuenta</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<table>
<colgroup>
<col style="width: 6%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 12%">
<col style="width: 13%">
<col style="width: 12%">
<col style="width: 3%">
<col style="width: 12%">
<col style="width: 26%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: right;">mtry</th>
<th style="text-align: right;">trees</th>
<th style="text-align: right;">min_n</th>
<th style="text-align: left;">.metric</th>
<th style="text-align: left;">.estimator</th>
<th style="text-align: right;">mean</th>
<th style="text-align: right;">n</th>
<th style="text-align: right;">std_err</th>
<th style="text-align: left;">.config</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: right;">830</td>
<td style="text-align: right;">10</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.7116667</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0512542</td>
<td style="text-align: left;">Preprocessor1_Model01</td>
</tr>
<tr class="even">
<td style="text-align: right;">1</td>
<td style="text-align: right;">830</td>
<td style="text-align: right;">10</td>
<td style="text-align: left;">f_meas</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8025521</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0367277</td>
<td style="text-align: left;">Preprocessor1_Model01</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: right;">830</td>
<td style="text-align: right;">10</td>
<td style="text-align: left;">j_index</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.3399194</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.1413562</td>
<td style="text-align: left;">Preprocessor1_Model01</td>
</tr>
<tr class="even">
<td style="text-align: right;">1</td>
<td style="text-align: right;">830</td>
<td style="text-align: right;">10</td>
<td style="text-align: left;">mcc</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.2950036</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.1214243</td>
<td style="text-align: left;">Preprocessor1_Model01</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: right;">830</td>
<td style="text-align: right;">10</td>
<td style="text-align: left;">precision</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8784160</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0349587</td>
<td style="text-align: left;">Preprocessor1_Model01</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="hiperparámetros-dial-tune-yardstick-2" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">10.3. Hiperparámetros: Dial &amp; Tune + Yardstick</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb38-1" class="hljs-ln-code"><a href="#cb38-1"></a><span class="fu">autoplot</span>(WF_hiper_parametros)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="Presentacion_Tidymodels_files/figure-revealjs/hiperpar-3-1.png" width="960" class="r-stretch"></section>
<section id="hiperparámetros-dial-tune-yardstick-3" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">10.3. Hiperparámetros: Dial &amp; Tune + Yardstick</h2>

<img data-src="Presentacion_Tidymodels_files/figure-revealjs/hiperpar-4-1.png" width="960" class="r-stretch"></section>
<section id="hiperparámetros-dial-tune-yardstick-4" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">10.3. Hiperparámetros: Dial &amp; Tune + Yardstick</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb39-1" class="hljs-ln-code"><a href="#cb39-1"></a>WF_hiperparametros_mejor <span class="ot">&lt;-</span> </span>
<span id="cb39-2" class="hljs-ln-code"><a href="#cb39-2"></a>  WF_hiper_parametros <span class="sc">%&gt;%</span> <span class="fu">show_best</span>(<span class="at">metric =</span> <span class="st">"roc_auc"</span>,<span class="at">n=</span><span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<table>
<colgroup>
<col style="width: 6%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 10%">
<col style="width: 13%">
<col style="width: 11%">
<col style="width: 3%">
<col style="width: 12%">
<col style="width: 27%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: right;">mtry</th>
<th style="text-align: right;">trees</th>
<th style="text-align: right;">min_n</th>
<th style="text-align: left;">.metric</th>
<th style="text-align: left;">.estimator</th>
<th style="text-align: right;">mean</th>
<th style="text-align: right;">n</th>
<th style="text-align: right;">std_err</th>
<th style="text-align: left;">.config</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: right;">830</td>
<td style="text-align: right;">10</td>
<td style="text-align: left;">roc_auc</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.721875</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0521491</td>
<td style="text-align: left;">Preprocessor1_Model01</td>
</tr>
</tbody>
</table>
</div>
</div>
</section></section>
<section>
<section id="la-conversión-de-todo-fit-y-predict" class="title-slide slide level1 center">
<h1>11. La conversión de todo: <code>fit()</code> y <code>predict()</code></h1>

</section>
<section id="la-conversión-de-todo-fit-y-predict-1" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">11. La conversión de todo: <code>fit()</code> y <code>predict()</code></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb40-1" class="hljs-ln-code"><a href="#cb40-1"></a>Modelo_fitted <span class="ot">&lt;-</span> WF_Receta_modelo_1_Random_forest <span class="sc">%&gt;%</span> </span>
<span id="cb40-2" class="hljs-ln-code"><a href="#cb40-2"></a>  <span class="co"># 🔴 Finalizamos el flujo de trabajo con la mejor combinación de Hiperparámetros encontrada</span></span>
<span id="cb40-3" class="hljs-ln-code"><a href="#cb40-3"></a>  <span class="fu">finalize_workflow</span>(WF_hiperparametros_mejor) <span class="sc">%&gt;%</span></span>
<span id="cb40-4" class="hljs-ln-code"><a href="#cb40-4"></a>  <span class="co"># 🔴 Finalmente ajustamos con fit()</span></span>
<span id="cb40-5" class="hljs-ln-code"><a href="#cb40-5"></a>  <span class="fu">fit</span>(<span class="at">data=</span> Training_datos)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>══ Workflow [trained] ══════════════════════════════════════════════════════════
Preprocessor: Recipe
Model: rand_forest()

── Preprocessor ────────────────────────────────────────────────────────────────
6 Recipe Steps

• step_filter_missing()
• step_impute_bag()
• step_normalize()
• step_scale()
• step_dummy()
• step_adasyn()

── Model ───────────────────────────────────────────────────────────────────────
Ranger result

Call:
 ranger::ranger(x = maybe_data_frame(x), y = y, mtry = min_cols(~1L,      x), num.trees = ~830L, min.node.size = min_rows(~10L, x),      importance = ~"impurity", num.threads = 1, verbose = FALSE,      seed = sample.int(10^5, 1), probability = TRUE) 

Type:                             Probability estimation 
Number of trees:                  830 
Sample size:                      316 
Number of independent variables:  3 
Mtry:                             1 
Target node size:                 10 
Variable importance mode:         impurity 
Splitrule:                        gini 
OOB prediction error (Brier s.):  0.1440296 </code></pre>
</div>
</div>
</section>
<section id="la-conversión-de-todo-fit-y-predict-2" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">11. La conversión de todo: <code>fit()</code> y <code>predict()</code></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb42-1" class="hljs-ln-code"><a href="#cb42-1"></a>Nuevo_caso <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb42-2" class="hljs-ln-code"><a href="#cb42-2"></a>  <span class="st">'Cognicion_01'</span> <span class="ot">=</span> <span class="dv">123</span>,</span>
<span id="cb42-3" class="hljs-ln-code"><a href="#cb42-3"></a>  <span class="st">'Cognicion_02'</span> <span class="ot">=</span> <span class="dv">102</span>,</span>
<span id="cb42-4" class="hljs-ln-code"><a href="#cb42-4"></a>  <span class="st">'Cognicion_03'</span> <span class="ot">=</span> <span class="dv">89</span>,</span>
<span id="cb42-5" class="hljs-ln-code"><a href="#cb42-5"></a>  <span class="st">'Cognicion_04'</span> <span class="ot">=</span> <span class="dv">100</span>,</span>
<span id="cb42-6" class="hljs-ln-code"><a href="#cb42-6"></a>  <span class="st">'Cognicion_05'</span> <span class="ot">=</span> <span class="dv">179</span>,</span>
<span id="cb42-7" class="hljs-ln-code"><a href="#cb42-7"></a>  <span class="st">'Escala_01'</span>    <span class="ot">=</span> <span class="dv">12</span>,</span>
<span id="cb42-8" class="hljs-ln-code"><a href="#cb42-8"></a>  <span class="st">'Escala_02'</span>    <span class="ot">=</span> <span class="dv">22</span>,</span>
<span id="cb42-9" class="hljs-ln-code"><a href="#cb42-9"></a>  <span class="st">'Escala_03'</span>    <span class="ot">=</span> <span class="dv">20</span></span>
<span id="cb42-10" class="hljs-ln-code"><a href="#cb42-10"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="la-conversión-de-todo-fit-y-predict-3" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">11. La conversión de todo: <code>fit()</code> y <code>predict()</code></h2>
<div>
<p>La función <code>predict()</code> de la librería stats tiene sinergias con Tidymodels y necesita de estos argumentos:</p>
<ol type="1">
<li class="fragment"><p>El modelo ya ajustado (model_fitted)</p></li>
<li class="fragment"><p>Un tibble/dataframe con la nueva predicción (debe contener las mismas variables)</p></li>
<li class="fragment"><p>Un tipo de predicción en los casos de clasificación, si queremos las probabilidades de cada categoría o la categoría predicha directamente</p></li>
</ol>
</div>
</section>
<section id="la-conversión-de-todo-fit-y-predict-4" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">11. La conversión de todo: <code>fit()</code> y <code>predict()</code></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb43-1" class="hljs-ln-code"><a href="#cb43-1"></a><span class="fu">tibble</span>(</span>
<span id="cb43-2" class="hljs-ln-code"><a href="#cb43-2"></a>  <span class="fu">predict</span>(Modelo_fitted, Nuevo_caso, <span class="at">type =</span> <span class="st">"prob"</span> ),</span>
<span id="cb43-3" class="hljs-ln-code"><a href="#cb43-3"></a>  <span class="fu">predict</span>(Modelo_fitted, Nuevo_caso, <span class="at">type =</span> <span class="st">"class"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 3
  .pred_0 .pred_1 .pred_class
    &lt;dbl&gt;   &lt;dbl&gt; &lt;fct&gt;      
1   0.929  0.0705 0          </code></pre>
</div>
</div>
</section>
<section id="la-función-last_fit" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">11.1. La función <code>last_fit()</code></h2>
<div>
<ul>
<li class="fragment">La función <code>last_fit()</code> permite tener todo unificado en un solo tibble. Recibe directamente los datos de entrenamiento y los datos de evaluación y crea sus métricas y sus predicciones.</li>
</ul>
</div>
</section>
<section id="la-función-last_fit-1" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">11.1. La función <code>last_fit()</code></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb45-1" class="hljs-ln-code"><a href="#cb45-1"></a>Modelo_1_final <span class="ot">&lt;-</span>  WF_Receta_modelo_1_Random_forest <span class="sc">%&gt;%</span> </span>
<span id="cb45-2" class="hljs-ln-code"><a href="#cb45-2"></a>  <span class="co"># 🔴 Finalizamos el flujo de trabajo con la mejor combinación de hiperparámetros encontrada</span></span>
<span id="cb45-3" class="hljs-ln-code"><a href="#cb45-3"></a>  <span class="fu">finalize_workflow</span>(WF_hiperparametros_mejor) <span class="sc">%&gt;%</span></span>
<span id="cb45-4" class="hljs-ln-code"><a href="#cb45-4"></a>  <span class="co"># 🔴 Ajustamos con last_fit(), poniendo el split de datos inicial y las métricas para las predicciones</span></span>
<span id="cb45-5" class="hljs-ln-code"><a href="#cb45-5"></a>  <span class="fu">last_fit</span>(Split_datos_strat, <span class="at">metrics =</span> Modelo_Metricas)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># Resampling results
# Manual resampling 
# A tibble: 1 × 6
  splits           id               .metrics .notes   .predictions .workflow 
  &lt;list&gt;           &lt;chr&gt;            &lt;list&gt;   &lt;list&gt;   &lt;list&gt;       &lt;list&gt;    
1 &lt;split [198/87]&gt; train/test split &lt;tibble&gt; &lt;tibble&gt; &lt;tibble&gt;     &lt;workflow&gt;</code></pre>
</div>
</div>
</section>
<section id="la-función-last_fit-2" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">11.1. La función <code>last_fit()</code></h2>
<div>
<ul>
<li class="fragment">Contamos con una serie de funciones para extraer todo lo que necesitemos de ellas:</li>
</ul>
<div style="font-size:35px;">
<ol type="1">
<li class="fragment"><code>extract_fit_engine()</code>: permite extraer el modelo crudo como si no hubiera sido ajustado con tidymodels.</li>
<li class="fragment"><code>collect_metrics()</code>: extraer un tibble con las métricas del modelo (puestas con metric set)</li>
<li class="fragment"><code>collect_predictions()</code>: extrae un tibble con las predicciones de los datos de evaluación.</li>
<li class="fragment"><code>extract_workflow()</code>: Permite extraer todo el flujo del modelo, incluyendo la receta de modo que podemos hacer predicciones.</li>
</ol>
</div>
</div>
</section>
<section id="la-función-last_fit-3" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">11.1. La función <code>last_fit()</code></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb47-1" class="hljs-ln-code"><a href="#cb47-1"></a>WF_Receta_modelo_1_Random_forest <span class="sc">%&gt;%</span></span>
<span id="cb47-2" class="hljs-ln-code"><a href="#cb47-2"></a>  <span class="co"># 🔴 Finalizamos el flujo de trabajo con la mejor combinación de hiperparámetros encontrada</span></span>
<span id="cb47-3" class="hljs-ln-code"><a href="#cb47-3"></a>  <span class="fu">finalize_workflow</span>(WF_hiperparametros_mejor) <span class="sc">%&gt;%</span></span>
<span id="cb47-4" class="hljs-ln-code"><a href="#cb47-4"></a>  <span class="co"># 🔴 Ajustamos con last_fit(), poniendo el split de datos inicial y las métricas para las predicciones</span></span>
<span id="cb47-5" class="hljs-ln-code"><a href="#cb47-5"></a>  <span class="fu">last_fit</span>(Split_datos_strat, <span class="at">metrics =</span> Modelo_Metricas) <span class="sc">%&gt;%</span></span>
<span id="cb47-6" class="hljs-ln-code"><a href="#cb47-6"></a>  <span class="co"># 🔴 dentro del flujo de trabajo están la receta y el modelo ya ajustado</span></span>
<span id="cb47-7" class="hljs-ln-code"><a href="#cb47-7"></a>  <span class="fu">extract_workflow</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>══ Workflow [trained] ══════════════════════════════════════════════════════════
Preprocessor: Recipe
Model: rand_forest()

── Preprocessor ────────────────────────────────────────────────────────────────
6 Recipe Steps

• step_filter_missing()
• step_impute_bag()
• step_normalize()
• step_scale()
• step_dummy()
• step_adasyn()

── Model ───────────────────────────────────────────────────────────────────────
Ranger result

Call:
 ranger::ranger(x = maybe_data_frame(x), y = y, mtry = min_cols(~1L,      x), num.trees = ~830L, min.node.size = min_rows(~10L, x),      importance = ~"impurity", num.threads = 1, verbose = FALSE,      seed = sample.int(10^5, 1), probability = TRUE) 

Type:                             Probability estimation 
Number of trees:                  830 
Sample size:                      316 
Number of independent variables:  3 
Mtry:                             1 
Target node size:                 10 
Variable importance mode:         impurity 
Splitrule:                        gini 
OOB prediction error (Brier s.):  0.1440296 </code></pre>
</div>
</div>
</section>
<section id="la-función-last_fit-4" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">11.1. La función <code>last_fit()</code></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb49-1" class="hljs-ln-code"><a href="#cb49-1"></a>Modelo_1_final <span class="sc">%&gt;%</span></span>
<span id="cb49-2" class="hljs-ln-code"><a href="#cb49-2"></a>  <span class="co"># 🔴 Con esta función podemos recopilar todas las métricas de un modelo</span></span>
<span id="cb49-3" class="hljs-ln-code"><a href="#cb49-3"></a>  <span class="fu">collect_metrics</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb49-4" class="hljs-ln-code"><a href="#cb49-4"></a>  <span class="fu">select</span>(<span class="sc">-</span>.estimator,<span class="sc">-</span>.config) <span class="sc">%&gt;%</span>  </span>
<span id="cb49-5" class="hljs-ln-code"><a href="#cb49-5"></a>  <span class="fu">mutate</span>(<span class="at">.estimate=</span> <span class="fu">round</span>(.estimate,<span class="dv">2</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 9 × 2
  .metric     .estimate
  &lt;chr&gt;           &lt;dbl&gt;
1 accuracy         0.69
2 j_index          0.28
3 precision        0.86
4 sensitivity      0.72
5 specificity      0.56
6 f_meas           0.79
7 recall           0.72
8 mcc              0.24
9 roc_auc          0.71</code></pre>
</div>
</div>
</section>
<section id="la-función-last_fit-5" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">11.1. La función <code>last_fit()</code></h2>

<img data-src="Presentacion_Tidymodels_files/figure-revealjs/curva-roc-1.png" width="960" class="r-stretch"></section></section>
<section>
<section id="threshold-performance" class="title-slide slide level1 center">
<h1>12. Threshold performance</h1>

</section>
<section id="threshold-performance-1" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">12. Threshold performance</h2>
<div>
<ul>
<li class="fragment">En tidymodels está la librería <code>probably</code> con la función <code>threshold_perf()</code>, la cual nos permite, dadas las predicciones del modelo, ver cómo se desenvuelve este umbral.</li>
</ul>
</div>
</section>
<section id="threshold-performance-2" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">12. Threshold performance</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb51-1" class="hljs-ln-code"><a href="#cb51-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(probably)</span>
<span id="cb51-2" class="hljs-ln-code"><a href="#cb51-2"></a></span>
<span id="cb51-3" class="hljs-ln-code"><a href="#cb51-3"></a>Modelo_1_final_Threshold_performance <span class="ot">&lt;-</span> </span>
<span id="cb51-4" class="hljs-ln-code"><a href="#cb51-4"></a>  Modelo_1_final <span class="sc">%&gt;%</span> </span>
<span id="cb51-5" class="hljs-ln-code"><a href="#cb51-5"></a>  <span class="fu">collect_predictions</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb51-6" class="hljs-ln-code"><a href="#cb51-6"></a>  <span class="fu">threshold_perf</span>(</span>
<span id="cb51-7" class="hljs-ln-code"><a href="#cb51-7"></a>    <span class="co"># Le decimos qué variable es la verdadera respuesta</span></span>
<span id="cb51-8" class="hljs-ln-code"><a href="#cb51-8"></a>    <span class="at">truth =</span> Var_respuesta,  </span>
<span id="cb51-9" class="hljs-ln-code"><a href="#cb51-9"></a>    <span class="co"># Le decimos qué variable es la predicción</span></span>
<span id="cb51-10" class="hljs-ln-code"><a href="#cb51-10"></a>    .pred_1, </span>
<span id="cb51-11" class="hljs-ln-code"><a href="#cb51-11"></a>    <span class="co"># Rango en el que se evaluará el umbral en cada punto</span></span>
<span id="cb51-12" class="hljs-ln-code"><a href="#cb51-12"></a>    <span class="at">thresholds =</span> <span class="fu">seq</span>(<span class="fl">0.5</span>,<span class="dv">1</span>,<span class="fl">0.01</span>) )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<table>
<thead>
<tr class="header">
<th style="text-align: right;">.threshold</th>
<th style="text-align: left;">.metric</th>
<th style="text-align: left;">.estimator</th>
<th style="text-align: right;">.estimate</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">0.50</td>
<td style="text-align: left;">sensitivity</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.28</td>
</tr>
<tr class="even">
<td style="text-align: right;">0.51</td>
<td style="text-align: left;">sensitivity</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.28</td>
</tr>
<tr class="odd">
<td style="text-align: right;">0.52</td>
<td style="text-align: left;">sensitivity</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.28</td>
</tr>
<tr class="even">
<td style="text-align: right;">0.53</td>
<td style="text-align: left;">sensitivity</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.28</td>
</tr>
<tr class="odd">
<td style="text-align: right;">0.54</td>
<td style="text-align: left;">sensitivity</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.26</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="threshold-performance-3" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">12. Threshold performance</h2>

<img data-src="Presentacion_Tidymodels_files/figure-revealjs/Threshold-2-1.png" width="960" class="r-stretch"></section></section>
<section>
<section id="workflow_set-para-unificarlas-todas" class="title-slide slide level1 center">
<h1>13. <code>workflow_set()</code> para unificarlas todas</h1>

</section>
<section id="workflow_set" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">13.1. workflow_set()</h2>
<ul>
<li>Supongamos que queremos evaluar 2 recetas con 1 modelo de RF:</li>
</ul>
<div style="margin-left:50px; font-size:35px;">
<ol type="1">
<li>Una con solo las variables ‘Escala’</li>
<li>Otra con solo las variables ‘Cognición’</li>
</ol>
</div>
<ul>
<li>Queremos dejarlo abierto a que puedan haber más.</li>
</ul>
</section>
<section id="workflow_set-1" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">13.1. workflow_set()</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb52-1" class="hljs-ln-code"><a href="#cb52-1"></a>  <span class="co"># 🔴 1.) Iniciamos la receta</span></span>
<span id="cb52-2" class="hljs-ln-code"><a href="#cb52-2"></a>Receta_modelo_Escalas <span class="ot">&lt;-</span> <span class="fu">recipe</span>(  </span>
<span id="cb52-3" class="hljs-ln-code"><a href="#cb52-3"></a>    <span class="at">formula =</span> Receta_modelo_Escalas_formula,</span>
<span id="cb52-4" class="hljs-ln-code"><a href="#cb52-4"></a>    <span class="at">data =</span> Training_datos , </span>
<span id="cb52-5" class="hljs-ln-code"><a href="#cb52-5"></a>    <span class="at">strata =</span> Var_respuesta)  <span class="sc">%&gt;%</span> </span>
<span id="cb52-6" class="hljs-ln-code"><a href="#cb52-6"></a>  <span class="co"># 🔴 2.) Steps</span></span>
<span id="cb52-7" class="hljs-ln-code"><a href="#cb52-7"></a>    <span class="co">#  🟡 2.1) Eliminamos las variables que contengan más de un 25% de datos perdidos </span></span>
<span id="cb52-8" class="hljs-ln-code"><a href="#cb52-8"></a>  <span class="fu">step_filter_missing</span>(<span class="fu">all_predictors</span>(),  <span class="at">threshold =</span> <span class="fl">0.25</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb52-9" class="hljs-ln-code"><a href="#cb52-9"></a>    <span class="co">#  🟡 2.2) Imputamos las variables numéricas con un algoritmo de bagged trees</span></span>
<span id="cb52-10" class="hljs-ln-code"><a href="#cb52-10"></a>  <span class="fu">step_impute_bag</span>(<span class="fu">all_numeric</span>(),<span class="sc">-</span><span class="fu">all_outcomes</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb52-11" class="hljs-ln-code"><a href="#cb52-11"></a>    <span class="co"># 2.3) Normalizamos los datos (restamos la media)</span></span>
<span id="cb52-12" class="hljs-ln-code"><a href="#cb52-12"></a>  <span class="fu">step_normalize</span>(<span class="fu">all_numeric</span>(),<span class="sc">-</span><span class="fu">all_outcomes</span>() ) <span class="sc">%&gt;%</span> </span>
<span id="cb52-13" class="hljs-ln-code"><a href="#cb52-13"></a>    <span class="co"># 2.4) Escalamos los datos (reducimos a escala entre 0 y 1)</span></span>
<span id="cb52-14" class="hljs-ln-code"><a href="#cb52-14"></a>  <span class="fu">step_scale</span>(<span class="fu">all_numeric</span>(),<span class="sc">-</span><span class="fu">all_outcomes</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb52-15" class="hljs-ln-code"><a href="#cb52-15"></a>    <span class="co"># 2.5) Convertimos a Dummy las variables factor (no hará nada por que no tenemos variables factor)</span></span>
<span id="cb52-16" class="hljs-ln-code"><a href="#cb52-16"></a>  <span class="fu">step_dummy</span>(<span class="fu">all_nominal</span>(), <span class="sc">-</span><span class="fu">all_outcomes</span>(), <span class="at">one_hot =</span> T) <span class="sc">%&gt;%</span> </span>
<span id="cb52-17" class="hljs-ln-code"><a href="#cb52-17"></a>    <span class="co"># 2.6) Sobremuestreamos la variable para equilibrar grupos</span></span>
<span id="cb52-18" class="hljs-ln-code"><a href="#cb52-18"></a>  <span class="fu">step_adasyn</span>(Var_respuesta, <span class="at">over_ratio =</span> <span class="dv">1</span>, <span class="at">neighbors =</span> <span class="dv">10</span>) </span>
<span id="cb52-19" class="hljs-ln-code"><a href="#cb52-19"></a></span>
<span id="cb52-20" class="hljs-ln-code"><a href="#cb52-20"></a></span>
<span id="cb52-21" class="hljs-ln-code"><a href="#cb52-21"></a>  <span class="co"># 🔴 1.) Iniciamos la receta</span></span>
<span id="cb52-22" class="hljs-ln-code"><a href="#cb52-22"></a>Receta_modelo_Cognicion <span class="ot">&lt;-</span> <span class="fu">recipe</span>(  </span>
<span id="cb52-23" class="hljs-ln-code"><a href="#cb52-23"></a>    <span class="at">formula =</span> Receta_modelo_Cognicion_formula,</span>
<span id="cb52-24" class="hljs-ln-code"><a href="#cb52-24"></a>    <span class="at">data =</span> Training_datos , </span>
<span id="cb52-25" class="hljs-ln-code"><a href="#cb52-25"></a>    <span class="at">strata =</span> Var_respuesta)  <span class="sc">%&gt;%</span> </span>
<span id="cb52-26" class="hljs-ln-code"><a href="#cb52-26"></a>  <span class="co"># 🔴 2.) Steps</span></span>
<span id="cb52-27" class="hljs-ln-code"><a href="#cb52-27"></a>    <span class="co">#  🟡 2.1) Eliminamos las variables que contengan más de un 25% de datos perdidos </span></span>
<span id="cb52-28" class="hljs-ln-code"><a href="#cb52-28"></a>  <span class="fu">step_filter_missing</span>(<span class="fu">all_predictors</span>(),  <span class="at">threshold =</span> <span class="fl">0.25</span>) <span class="sc">%&gt;%</span></span>
<span id="cb52-29" class="hljs-ln-code"><a href="#cb52-29"></a>    <span class="co">#  🟡 2.2) Imputamos las variables numéricas con un algoritmo de bagged trees</span></span>
<span id="cb52-30" class="hljs-ln-code"><a href="#cb52-30"></a>  <span class="fu">step_impute_mean</span>(<span class="fu">all_numeric</span>(),<span class="sc">-</span><span class="fu">all_outcomes</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb52-31" class="hljs-ln-code"><a href="#cb52-31"></a>    <span class="co"># 2.3) Normalizamos los datos (restamos la media)</span></span>
<span id="cb52-32" class="hljs-ln-code"><a href="#cb52-32"></a>  <span class="fu">step_normalize</span>(<span class="fu">all_numeric</span>(),<span class="sc">-</span><span class="fu">all_outcomes</span>() ) <span class="sc">%&gt;%</span> </span>
<span id="cb52-33" class="hljs-ln-code"><a href="#cb52-33"></a>    <span class="co"># 2.4) Escalamos los datos (reducimos a escala entre 0 y 1)</span></span>
<span id="cb52-34" class="hljs-ln-code"><a href="#cb52-34"></a>  <span class="fu">step_scale</span>(<span class="fu">all_numeric</span>(),<span class="sc">-</span><span class="fu">all_outcomes</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb52-35" class="hljs-ln-code"><a href="#cb52-35"></a>    <span class="co"># 2.5) Convertimos a Dummy las variables factor (no hará nada por que no tenemos variables factor)</span></span>
<span id="cb52-36" class="hljs-ln-code"><a href="#cb52-36"></a>  <span class="fu">step_dummy</span>(<span class="fu">all_nominal</span>(), <span class="sc">-</span><span class="fu">all_outcomes</span>(), <span class="at">one_hot =</span> T) <span class="sc">%&gt;%</span> </span>
<span id="cb52-37" class="hljs-ln-code"><a href="#cb52-37"></a>    <span class="co"># 2.6) Sobremuestreamos la variable para equilibrar grupos</span></span>
<span id="cb52-38" class="hljs-ln-code"><a href="#cb52-38"></a>  <span class="fu">step_adasyn</span>(Var_respuesta, <span class="at">over_ratio =</span> <span class="dv">1</span>, <span class="at">neighbors =</span> <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="workflow_set-2" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">13.2. workflow_set()</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb53-1" class="hljs-ln-code"><a href="#cb53-1"></a>Receta_list <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb53-2" class="hljs-ln-code"><a href="#cb53-2"></a>  <span class="st">'Modelo_Escalas'</span>    <span class="ot">=</span> Receta_modelo_Escalas,</span>
<span id="cb53-3" class="hljs-ln-code"><a href="#cb53-3"></a>  <span class="st">'Modelo_Cognicion'</span>  <span class="ot">=</span> Receta_modelo_Cognicion</span>
<span id="cb53-4" class="hljs-ln-code"><a href="#cb53-4"></a>  )</span>
<span id="cb53-5" class="hljs-ln-code"><a href="#cb53-5"></a>  </span>
<span id="cb53-6" class="hljs-ln-code"><a href="#cb53-6"></a>Model_list <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb53-7" class="hljs-ln-code"><a href="#cb53-7"></a>  <span class="at">RandomForest     =</span> Model_RandomForest</span>
<span id="cb53-8" class="hljs-ln-code"><a href="#cb53-8"></a>  <span class="co"># ,XGBoost          = Model_XGBoost</span></span>
<span id="cb53-9" class="hljs-ln-code"><a href="#cb53-9"></a>  <span class="co"># ,Bagged_Trees     = Model_Bagged_Tree</span></span>
<span id="cb53-10" class="hljs-ln-code"><a href="#cb53-10"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="workflow_set-3" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">13.2. workflow_set()</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb54-1" class="hljs-ln-code"><a href="#cb54-1"></a>Wokflows_set <span class="ot">&lt;-</span> <span class="fu">workflow_set</span>(</span>
<span id="cb54-2" class="hljs-ln-code"><a href="#cb54-2"></a>  <span class="at">preproc =</span> Receta_list, </span>
<span id="cb54-3" class="hljs-ln-code"><a href="#cb54-3"></a>  <span class="at">models =</span> Model_list, </span>
<span id="cb54-4" class="hljs-ln-code"><a href="#cb54-4"></a>  <span class="co"># 🔴 La opción Cross es para que haga todos los cruces de modelos con recetas</span></span>
<span id="cb54-5" class="hljs-ln-code"><a href="#cb54-5"></a>  <span class="at">cross =</span> T)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A workflow set/tibble: 2 × 4
  wflow_id                      info             option    result    
  &lt;chr&gt;                         &lt;list&gt;           &lt;list&gt;    &lt;list&gt;    
1 Modelo_Escalas_RandomForest   &lt;tibble [1 × 4]&gt; &lt;opts[0]&gt; &lt;list [0]&gt;
2 Modelo_Cognicion_RandomForest &lt;tibble [1 × 4]&gt; &lt;opts[0]&gt; &lt;list [0]&gt;</code></pre>
</div>
</div>
</section>
<section id="workflow_set-4" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">13.2. workflow_set()</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb56-1" class="hljs-ln-code"><a href="#cb56-1"></a>Wokflows_set_map <span class="ot">&lt;-</span> </span>
<span id="cb56-2" class="hljs-ln-code"><a href="#cb56-2"></a>  Wokflows_set <span class="sc">%&gt;%</span> </span>
<span id="cb56-3" class="hljs-ln-code"><a href="#cb56-3"></a>  <span class="co"># 🔴 workflow_map() es una función que permite ajustar múltiples flujos de trabajo</span></span>
<span id="cb56-4" class="hljs-ln-code"><a href="#cb56-4"></a>    <span class="fu">workflow_map</span>(</span>
<span id="cb56-5" class="hljs-ln-code"><a href="#cb56-5"></a>    <span class="at">resamples =</span> Folds_training, </span>
<span id="cb56-6" class="hljs-ln-code"><a href="#cb56-6"></a>    <span class="at">fn =</span> <span class="st">"tune_grid"</span>,</span>
<span id="cb56-7" class="hljs-ln-code"><a href="#cb56-7"></a>    <span class="at">grid =</span> <span class="fu">grid_max_entropy</span>(</span>
<span id="cb56-8" class="hljs-ln-code"><a href="#cb56-8"></a>      <span class="fu">mtry</span>(<span class="at">range  =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">4</span>)),</span>
<span id="cb56-9" class="hljs-ln-code"><a href="#cb56-9"></a>      <span class="fu">min_n</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">30</span>)),</span>
<span id="cb56-10" class="hljs-ln-code"><a href="#cb56-10"></a>      <span class="fu">trees</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1000</span>)),</span>
<span id="cb56-11" class="hljs-ln-code"><a href="#cb56-11"></a>      <span class="at">size =</span> <span class="dv">10</span>),</span>
<span id="cb56-12" class="hljs-ln-code"><a href="#cb56-12"></a>    <span class="co"># verbose = TRUE, </span></span>
<span id="cb56-13" class="hljs-ln-code"><a href="#cb56-13"></a>    <span class="at">metrics =</span> Modelo_Metricas, </span>
<span id="cb56-14" class="hljs-ln-code"><a href="#cb56-14"></a>    <span class="at">control =</span> <span class="fu">control_grid</span>( <span class="at">save_pred =</span> T),</span>
<span id="cb56-15" class="hljs-ln-code"><a href="#cb56-15"></a>    <span class="co"># 🔴 para garantizar replicabildiad, podemos fijar la semilla en el proceso</span></span>
<span id="cb56-16" class="hljs-ln-code"><a href="#cb56-16"></a>    <span class="at">seed =</span> <span class="dv">2465</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A workflow set/tibble: 2 × 4
  wflow_id                      info             option    result   
  &lt;chr&gt;                         &lt;list&gt;           &lt;list&gt;    &lt;list&gt;   
1 Modelo_Escalas_RandomForest   &lt;tibble [1 × 4]&gt; &lt;opts[4]&gt; &lt;tune[+]&gt;
2 Modelo_Cognicion_RandomForest &lt;tibble [1 × 4]&gt; &lt;opts[4]&gt; &lt;tune[+]&gt;</code></pre>
</div>
</div>
</section>
<section id="workflow_set-5" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">13.2. workflow_set()</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb58-1" class="hljs-ln-code"><a href="#cb58-1"></a><span class="co"># Modelo Escalas ----</span></span>
<span id="cb58-2" class="hljs-ln-code"><a href="#cb58-2"></a>Modelo_Escalas_RandomForest_hyperparametros <span class="ot">&lt;-</span> Wokflows_set_map <span class="sc">%&gt;%</span> </span>
<span id="cb58-3" class="hljs-ln-code"><a href="#cb58-3"></a>  <span class="co"># 🔴 Extraemos el flujo correspondiente al modelo que queremos </span></span>
<span id="cb58-4" class="hljs-ln-code"><a href="#cb58-4"></a>  <span class="fu">extract_workflow_set_result</span>(<span class="st">'Modelo_Escalas_RandomForest'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb58-5" class="hljs-ln-code"><a href="#cb58-5"></a>  <span class="co"># 🔴 podemos ver una tabla con los mejores resultados, acorde a una métrica</span></span>
<span id="cb58-6" class="hljs-ln-code"><a href="#cb58-6"></a>  <span class="fu">show_best</span>(<span class="at">metric =</span> <span class="st">'sensitivity'</span>, <span class="at">n=</span><span class="dv">50</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb58-7" class="hljs-ln-code"><a href="#cb58-7"></a>  <span class="fu">filter</span>(<span class="fu">row_number</span>()<span class="sc">==</span><span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb58-8" class="hljs-ln-code"><a href="#cb58-8"></a>  <span class="fu">select</span>(mtry,trees,min_n,.config )</span>
<span id="cb58-9" class="hljs-ln-code"><a href="#cb58-9"></a></span>
<span id="cb58-10" class="hljs-ln-code"><a href="#cb58-10"></a>Modelo_Escalas_RandomForest_final <span class="ot">&lt;-</span> Wokflows_set_map <span class="sc">%&gt;%</span> </span>
<span id="cb58-11" class="hljs-ln-code"><a href="#cb58-11"></a>  <span class="co"># 🔴 Extraemos el flujo correspondiente al modelo que queremos </span></span>
<span id="cb58-12" class="hljs-ln-code"><a href="#cb58-12"></a>  <span class="fu">extract_workflow</span>(<span class="st">'Modelo_Escalas_RandomForest'</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb58-13" class="hljs-ln-code"><a href="#cb58-13"></a>  <span class="fu">finalize_workflow</span>(Modelo_Escalas_RandomForest_hyperparametros) <span class="sc">%&gt;%</span></span>
<span id="cb58-14" class="hljs-ln-code"><a href="#cb58-14"></a>  <span class="fu">last_fit</span>(Split_datos_strat, <span class="at">metrics =</span> Modelo_Metricas )</span>
<span id="cb58-15" class="hljs-ln-code"><a href="#cb58-15"></a></span>
<span id="cb58-16" class="hljs-ln-code"><a href="#cb58-16"></a><span class="co"># Modelo Cognición ----</span></span>
<span id="cb58-17" class="hljs-ln-code"><a href="#cb58-17"></a></span>
<span id="cb58-18" class="hljs-ln-code"><a href="#cb58-18"></a>Modelo_Cognicion_RandomForest_hyperparametros <span class="ot">&lt;-</span> Wokflows_set_map <span class="sc">%&gt;%</span> </span>
<span id="cb58-19" class="hljs-ln-code"><a href="#cb58-19"></a>  <span class="fu">extract_workflow_set_result</span>(<span class="st">'Modelo_Cognicion_RandomForest'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb58-20" class="hljs-ln-code"><a href="#cb58-20"></a>  <span class="fu">show_best</span>(<span class="at">metric =</span> <span class="st">'sensitivity'</span>, <span class="at">n=</span><span class="dv">50</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb58-21" class="hljs-ln-code"><a href="#cb58-21"></a>  <span class="fu">filter</span>(<span class="fu">row_number</span>()<span class="sc">==</span><span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb58-22" class="hljs-ln-code"><a href="#cb58-22"></a>  <span class="fu">select</span>(mtry,trees,min_n,.config )</span>
<span id="cb58-23" class="hljs-ln-code"><a href="#cb58-23"></a></span>
<span id="cb58-24" class="hljs-ln-code"><a href="#cb58-24"></a>Modelo_Cognicion_RandomForest_final <span class="ot">&lt;-</span> Wokflows_set_map <span class="sc">%&gt;%</span> </span>
<span id="cb58-25" class="hljs-ln-code"><a href="#cb58-25"></a>  <span class="fu">extract_workflow</span>(<span class="st">'Modelo_Cognicion_RandomForest'</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb58-26" class="hljs-ln-code"><a href="#cb58-26"></a>  <span class="fu">finalize_workflow</span>(Modelo_Cognicion_RandomForest_hyperparametros) <span class="sc">%&gt;%</span></span>
<span id="cb58-27" class="hljs-ln-code"><a href="#cb58-27"></a>  <span class="fu">last_fit</span>(Split_datos_strat, <span class="at">metrics =</span> Modelo_Metricas )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="métricas-de-todos-los-modelos" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">13.3. Métricas de todos los modelos</h2>
<div class="cell">
<div class="cell-output-display">
<table>
<thead>
<tr class="header">
<th style="text-align: left;">.metric</th>
<th style="text-align: right;">Modelo_Escala</th>
<th style="text-align: right;">Modelo_Cognicion</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">accuracy</td>
<td style="text-align: right;">0.6896552</td>
<td style="text-align: right;">0.5862069</td>
</tr>
<tr class="even">
<td style="text-align: left;">j_index</td>
<td style="text-align: right;">0.4033816</td>
<td style="text-align: right;">-0.0966184</td>
</tr>
<tr class="odd">
<td style="text-align: left;">precision</td>
<td style="text-align: right;">0.9038462</td>
<td style="text-align: right;">0.7704918</td>
</tr>
<tr class="even">
<td style="text-align: left;">sensitivity</td>
<td style="text-align: right;">0.6811594</td>
<td style="text-align: right;">0.6811594</td>
</tr>
<tr class="odd">
<td style="text-align: left;">specificity</td>
<td style="text-align: right;">0.7222222</td>
<td style="text-align: right;">0.2222222</td>
</tr>
<tr class="even">
<td style="text-align: left;">f_meas</td>
<td style="text-align: right;">0.7768595</td>
<td style="text-align: right;">0.7230769</td>
</tr>
<tr class="odd">
<td style="text-align: left;">recall</td>
<td style="text-align: right;">0.6811594</td>
<td style="text-align: right;">0.6811594</td>
</tr>
<tr class="even">
<td style="text-align: left;">mcc</td>
<td style="text-align: right;">0.3332278</td>
<td style="text-align: right;">-0.0855005</td>
</tr>
<tr class="odd">
<td style="text-align: left;">roc_auc</td>
<td style="text-align: right;">0.7846216</td>
<td style="text-align: right;">0.4983897</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="curvas-roc-de-todos-los-modelos" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">13.4. Curvas roc de todos los modelos</h2>

<img data-src="Presentacion_Tidymodels_files/figure-revealjs/curvas-roc-todos-modelos-1.png" width="960" class="r-stretch"></section></section>
<section>
<section id="shap-values" class="title-slide slide level1 center">
<h1>14. SHAP values</h1>

</section>
<section id="shap-values-1" class="slide level2">
<h2>14. SHAP values</h2>
<div>
<ul>
<li class="fragment"><p>Forma de ver la contribución de las variables utilizadas en las predicciones.</p></li>
<li class="fragment"><p>Se pueden utilizar tanto como para el modelo general como en individuos.</p></li>
<li class="fragment"><p>Algunos paquetes que se encargan de generar shap values son h2o y DALEXTRA.</p></li>
</ul>
</div>
</section>
<section id="shap-values-2" class="slide level2">
<h2>14. SHAP values</h2>

<img data-src="Presentacion_Tidymodels_files/figure-revealjs/shap-values-12-1.png" width="960" class="r-stretch"></section></section>
<section id="gracias-por-vuestra-atención" class="title-slide slide level1 center">
<h1>Gracias por vuestra atención</h1>
<div class="footer footer-default">

</div>
</section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="Presentacion_Tidymodels_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="Presentacion_Tidymodels_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="Presentacion_Tidymodels_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="Presentacion_Tidymodels_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="Presentacion_Tidymodels_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="Presentacion_Tidymodels_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="Presentacion_Tidymodels_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="Presentacion_Tidymodels_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="Presentacion_Tidymodels_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="Presentacion_Tidymodels_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'smaller': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: false,

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'slide',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        text: function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
      function tippyHover(el, contentFn) {
        const config = {
          allowHTML: true,
          content: contentFn,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start'
        };
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          return note.innerHTML;
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>